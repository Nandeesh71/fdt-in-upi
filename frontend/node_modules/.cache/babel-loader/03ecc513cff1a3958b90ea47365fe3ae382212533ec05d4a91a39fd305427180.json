{"ast":null,"code":"import _objectSpread from\"/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useRef}from'react';import{useNavigate}from'react-router-dom';import{createTransaction,searchUsers}from'../api';import{useNotifications}from'./NotificationSystem';import cacheManager from'../utils/cacheManager';import favoritesManager from'../utils/favoritesManager';import errorHandler from'../utils/errorHandler';import RecipientDropdown from'./RecipientDropdown';import TransactionResult from'./TransactionResult';import FavoritesModal from'./FavoritesModal';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const SendMoney=_ref=>{let{user,setUser,onBack,onLogout}=_ref;const navigate=useNavigate();const{addNotification}=useNotifications();const[loading,setLoading]=useState(false);const[transactionResult,setTransactionResult]=useState(null);const[searchResults,setSearchResults]=useState([]);const[showDropdown,setShowDropdown]=useState(false);const[showFavoritesModal,setShowFavoritesModal]=useState(false);const[recipientUser,setRecipientUser]=useState(null);const amountRef=useRef(null);const[formData,setFormData]=useState({recipient_vpa:'',amount:'',remarks:''});const[error,setError]=useState('');const handleChange=e=>{const{name,value}=e.target;setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:value}));setError('');setRecipientUser(null);setShowDropdown(false);};const handleRecipientChange=async value=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{recipient_vpa:value}));setError('');setRecipientUser(null);if(value.length>=3){try{const response=await searchUsers(value);if(response.status==='success'){setSearchResults(response.results);setShowDropdown(true);}else{setSearchResults([]);}}catch(error){// Silent fail for search - don't show error as user is still typing\nerrorHandler.logError(error,'Search Users');setSearchResults([]);}}else{setSearchResults([]);setShowDropdown(false);}};const handleRecipientSelect=user=>{setRecipientUser(user);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{recipient_vpa:user.upi_id}));setShowDropdown(false);};const formatAmount=value=>{const cleaned=value.replace(/[^\\d.]/g,'');const parts=cleaned.split('.');if(parts.length>2)return value;const integerPart=parts[0]||'';const decimalPart=parts[1]||'';return decimalPart.length>2?integerPart+'.'+decimalPart.slice(0,2):cleaned;};const handleAmountChange=e=>{const formatted=formatAmount(e.target.value);setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{amount:formatted}));setError('');};const validateForm=()=>{// Validate recipient\nif(!formData.recipient_vpa){setError('Please enter a recipient UPI ID or phone number');return false;}// Check if it's a phone number or UPI ID and validate accordingly\nconst isPhoneNumber=/^\\d{10}$/.test(formData.recipient_vpa.replace(/\\D/g,''));const isUPI=formData.recipient_vpa.includes('@');if(!isPhoneNumber&&!isUPI){const{error}=errorHandler.validatePhoneNumber(formData.recipient_vpa);if(!error){const upiValidation=errorHandler.validateUPI(formData.recipient_vpa);if(!upiValidation.isValid){setError(upiValidation.error);return false;}}}// Validate amount\nif(!formData.amount||parseFloat(formData.amount)<=0){setError('Please enter a valid amount greater than ₹0');return false;}// Validate amount against balance\nconst amountValidation=errorHandler.validateAmount(formData.amount,user.balance,1,100000);if(!amountValidation.isValid){setError(amountValidation.error);return false;}return true;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setLoading(true);setError('');try{var _response$transaction;const response=await createTransaction({recipient_vpa:formData.recipient_vpa,amount:parseFloat(formData.amount),remarks:formData.remarks||'Payment'});// Update user balance only when the transaction is allowed\nif(response.status==='success'&&((_response$transaction=response.transaction)===null||_response$transaction===void 0?void 0:_response$transaction.action)==='ALLOW'){const newBalance=user.balance-parseFloat(formData.amount);const updatedUser=_objectSpread(_objectSpread({},user),{},{balance:newBalance});setUser(updatedUser);localStorage.setItem('fdt_user',JSON.stringify(updatedUser));}// Set transaction result\nsetTransactionResult({status:response.status,transaction:response.transaction,requiresConfirmation:response.requires_confirmation,riskLevel:response.risk_level,receiverUserId:response.receiver_user_id});// Clear cache\ncacheManager.invalidateCategory('dashboard');cacheManager.invalidateCategory('transactions');}catch(err){// Use error handler for comprehensive error management\nconst errorInfo=errorHandler.handleAPIError(err,'Create Transaction');setError(errorInfo.message);addNotification({type:'error',title:errorInfo.title,message:errorInfo.message,category:'error'});}finally{setLoading(false);}};const handleSelectFavorite=favorite=>{setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{recipient_vpa:favorite.vpa,amount:favorite.amount?favorite.amount.toString():'',remarks:favorite.remarks||''}));setRecipientUser(null);if(amountRef.current&&favorite.amount){amountRef.current.focus();}};const handleAddFavorite=()=>{if(formData.recipient_vpa){const newFavorite={name:(recipientUser===null||recipientUser===void 0?void 0:recipientUser.name)||formData.recipient_vpa,vpa:formData.recipient_vpa,amount:formData.amount?parseFloat(formData.amount):null,remarks:formData.remarks||''};favoritesManager.addFavorite(newFavorite);addNotification({type:'success',title:'Recipient Saved',message:'You can quickly access this recipient from Saved Recipients',category:'success'});}else{setError('Please enter a recipient UPI ID first');}};const formatCurrency=amount=>{return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR',maximumFractionDigits:0}).format(amount);};// Show transaction result if available\nif(transactionResult){return/*#__PURE__*/_jsx(TransactionResult,{result:transactionResult,onBack:()=>setTransactionResult(null),senderUser:user});}return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-slate-900 via-green-900 to-slate-900\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 -z-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 w-96 h-96 bg-green-500 rounded-full filter blur-3xl opacity-20 animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 right-0 w-96 h-96 bg-teal-500 rounded-full filter blur-3xl opacity-20 animate-pulse delay-1000\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-black/20 backdrop-blur-xl border-b border-white/10 text-white p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>{if(onLogout)onLogout();navigate('/login');},className:\"mr-4 p-2 hover:bg-white/10 rounded-lg transition-colors\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Send Money\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>navigate('/dashboard'),className:\"flex items-center space-x-2 px-4 py-2 bg-purple-600/80 hover:bg-purple-600 text-white rounded-lg transition-colors\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m7 0a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium\",children:\"Fraud Detection\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"p-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl p-6 mb-6 shadow-lg\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-white/80 text-sm mb-1\",children:\"Available Balance\"}),/*#__PURE__*/_jsx(\"div\",{className:\"text-white text-3xl font-bold\",children:formatCurrency((user===null||user===void 0?void 0:user.balance)||0)})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-5\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-xl p-5 border border-white/20 relative z-10\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-white/80 text-sm mb-2 block\",children:\"Recipient\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"recipient_vpa\",value:formData.recipient_vpa,onChange:e=>handleRecipientChange(e.target.value),placeholder:\"Phone number or UPI ID\",className:\"w-full bg-white/10 text-white placeholder-white/40 rounded-lg px-4 py-3 border border-white/20 focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/50\",disabled:loading,autoComplete:\"off\"}),/*#__PURE__*/_jsx(RecipientDropdown,{show:showDropdown,results:searchResults,onSelect:handleRecipientSelect,onClose:()=>setShowDropdown(false)})]}),recipientUser&&/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 bg-green-500/20 border border-green-500/30 px-3 py-2 rounded-lg\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-green-400 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-white font-semibold\",children:recipientUser.name}),/*#__PURE__*/_jsx(\"div\",{className:\"text-green-300 text-sm\",children:recipientUser.upi_id})]})]})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-xl p-5 border border-white/20\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-white/80 text-sm mb-2 block\",children:\"Amount (\\u20B9)\"}),/*#__PURE__*/_jsx(\"input\",{ref:amountRef,type:\"text\",name:\"amount\",value:formData.amount,onChange:handleAmountChange,placeholder:\"0.00\",className:\"w-full bg-white/10 text-white placeholder-white/40 rounded-lg px-4 py-3 border border-white/20 focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/50 text-2xl font-semibold\",disabled:loading}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 flex space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{amount:'500'})),className:\"px-3 py-1 bg-white/20 text-white/80 rounded-lg hover:bg-white/30 text-sm\",disabled:loading,children:\"\\u20B9500\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{amount:'1000'})),className:\"px-3 py-1 bg-white/20 text-white/80 rounded-lg hover:bg-white/30 text-sm\",disabled:loading,children:\"\\u20B91,000\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setFormData(prev=>_objectSpread(_objectSpread({},prev),{},{amount:'5000'})),className:\"px-3 py-1 bg-white/20 text-white/80 rounded-lg hover:bg-white/30 text-sm\",disabled:loading,children:\"\\u20B95,000\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-xl p-5 border border-white/20\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"text-white/80 text-sm mb-2 block\",children:\"Remarks (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"remarks\",value:formData.remarks,onChange:handleChange,placeholder:\"Add a note...\",className:\"w-full bg-white/10 text-white placeholder-white/40 rounded-lg px-4 py-3 border border-white/20 focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/50\",disabled:loading})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:()=>setShowFavoritesModal(true),className:\"flex items-center justify-center space-x-2 px-4 py-3 bg-yellow-600/80 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm font-medium\",disabled:loading,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Saved Recipients\"})]}),/*#__PURE__*/_jsxs(\"button\",{type:\"button\",onClick:handleAddFavorite,className:\"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600/80 hover:bg-green-600 text-white rounded-lg transition-colors text-sm font-medium\",disabled:loading||!formData.recipient_vpa,children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 6v6m0 0v6m0-6h6m0 0h6\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Save Recipient\"})]})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500/20 backdrop-blur-xl border border-red-500/50 rounded-xl p-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-red-400 mr-3\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",clipRule:\"evenodd\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-red-100\",children:error})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold py-4 rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\",children:loading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"}),\"Processing...\"]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M13 7l5 5m0 0l-5 5m5-5H6\"})}),\"Send Money\"]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-6 p-4 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-purple-400 mr-3 mt-0.5 flex-shrink-0\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\",clipRule:\"evenodd\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"text-white/60 text-sm\",children:[/*#__PURE__*/_jsx(\"strong\",{className:\"text-white/80\",children:\"Protected by AI:\"}),\" All transactions are analyzed in real-time for fraud detection to keep your money safe.\"]})]})})]})}),/*#__PURE__*/_jsx(FavoritesModal,{isOpen:showFavoritesModal,onClose:()=>setShowFavoritesModal(false),onSelectFavorite:handleSelectFavorite,onAddNew:()=>setShowFavoritesModal(false)})]});};export default SendMoney;","map":{"version":3,"names":["React","useState","useRef","useNavigate","createTransaction","searchUsers","useNotifications","cacheManager","favoritesManager","errorHandler","RecipientDropdown","TransactionResult","FavoritesModal","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","SendMoney","_ref","user","setUser","onBack","onLogout","navigate","addNotification","loading","setLoading","transactionResult","setTransactionResult","searchResults","setSearchResults","showDropdown","setShowDropdown","showFavoritesModal","setShowFavoritesModal","recipientUser","setRecipientUser","amountRef","formData","setFormData","recipient_vpa","amount","remarks","error","setError","handleChange","e","name","value","target","prev","_objectSpread","handleRecipientChange","length","response","status","results","logError","handleRecipientSelect","upi_id","formatAmount","cleaned","replace","parts","split","integerPart","decimalPart","slice","handleAmountChange","formatted","validateForm","isPhoneNumber","test","isUPI","includes","validatePhoneNumber","upiValidation","validateUPI","isValid","parseFloat","amountValidation","validateAmount","balance","handleSubmit","preventDefault","_response$transaction","transaction","action","newBalance","updatedUser","localStorage","setItem","JSON","stringify","requiresConfirmation","requires_confirmation","riskLevel","risk_level","receiverUserId","receiver_user_id","invalidateCategory","err","errorInfo","handleAPIError","message","type","title","category","handleSelectFavorite","favorite","vpa","toString","current","focus","handleAddFavorite","newFavorite","addFavorite","formatCurrency","Intl","NumberFormat","style","currency","maximumFractionDigits","format","result","senderUser","className","children","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","onSubmit","onChange","placeholder","disabled","autoComplete","show","onSelect","onClose","ref","fillRule","clipRule","isOpen","onSelectFavorite","onAddNew"],"sources":["/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/src/components/SendMoney.js"],"sourcesContent":["import React, { useState, useRef } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { createTransaction, searchUsers } from '../api';\nimport { useNotifications } from './NotificationSystem';\nimport cacheManager from '../utils/cacheManager';\nimport favoritesManager from '../utils/favoritesManager';\nimport errorHandler from '../utils/errorHandler';\nimport RecipientDropdown from './RecipientDropdown';\nimport TransactionResult from './TransactionResult';\nimport FavoritesModal from './FavoritesModal';\n\nconst SendMoney = ({ user, setUser, onBack, onLogout }) => {\n  const navigate = useNavigate();\n  const { addNotification } = useNotifications();\n  const [loading, setLoading] = useState(false);\n  const [transactionResult, setTransactionResult] = useState(null);\n  const [searchResults, setSearchResults] = useState([]);\n  const [showDropdown, setShowDropdown] = useState(false);\n  const [showFavoritesModal, setShowFavoritesModal] = useState(false);\n  const [recipientUser, setRecipientUser] = useState(null);\n  const amountRef = useRef(null);\n  const [formData, setFormData] = useState({\n    recipient_vpa: '',\n    amount: '',\n    remarks: ''\n  });\n  const [error, setError] = useState('');\n\n  const handleChange = (e) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    setError('');\n    setRecipientUser(null);\n    setShowDropdown(false);\n  };\n\n  const handleRecipientChange = async (value) => {\n    setFormData(prev => ({\n      ...prev,\n      recipient_vpa: value\n    }));\n    setError('');\n    setRecipientUser(null);\n    \n     if (value.length >= 3) {\n       try {\n         const response = await searchUsers(value);\n         if (response.status === 'success') {\n           setSearchResults(response.results);\n           setShowDropdown(true);\n         } else {\n           setSearchResults([]);\n         }\n       } catch (error) {\n         // Silent fail for search - don't show error as user is still typing\n         errorHandler.logError(error, 'Search Users');\n         setSearchResults([]);\n       }\n     } else {\n       setSearchResults([]);\n       setShowDropdown(false);\n     }\n   };\n\n  const handleRecipientSelect = (user) => {\n    setRecipientUser(user);\n    setFormData(prev => ({\n      ...prev,\n      recipient_vpa: user.upi_id\n    }));\n    setShowDropdown(false);\n  };\n\n  const formatAmount = (value) => {\n    const cleaned = value.replace(/[^\\d.]/g, '');\n    const parts = cleaned.split('.');\n    if (parts.length > 2) return value;\n    const integerPart = parts[0] || '';\n    const decimalPart = parts[1] || '';\n    return decimalPart.length > 2 ? integerPart + '.' + decimalPart.slice(0, 2) : cleaned;\n  };\n\n  const handleAmountChange = (e) => {\n    const formatted = formatAmount(e.target.value);\n    setFormData(prev => ({\n      ...prev,\n      amount: formatted\n    }));\n    setError('');\n  };\n\n  const validateForm = () => {\n    // Validate recipient\n    if (!formData.recipient_vpa) {\n      setError('Please enter a recipient UPI ID or phone number');\n      return false;\n    }\n\n    // Check if it's a phone number or UPI ID and validate accordingly\n    const isPhoneNumber = /^\\d{10}$/.test(formData.recipient_vpa.replace(/\\D/g, ''));\n    const isUPI = formData.recipient_vpa.includes('@');\n\n    if (!isPhoneNumber && !isUPI) {\n      const { error } = errorHandler.validatePhoneNumber(formData.recipient_vpa);\n      if (!error) {\n        const upiValidation = errorHandler.validateUPI(formData.recipient_vpa);\n        if (!upiValidation.isValid) {\n          setError(upiValidation.error);\n          return false;\n        }\n      }\n    }\n\n    // Validate amount\n    if (!formData.amount || parseFloat(formData.amount) <= 0) {\n      setError('Please enter a valid amount greater than ₹0');\n      return false;\n    }\n\n    // Validate amount against balance\n    const amountValidation = errorHandler.validateAmount(\n      formData.amount,\n      user.balance,\n      1,\n      100000\n    );\n    \n    if (!amountValidation.isValid) {\n      setError(amountValidation.error);\n      return false;\n    }\n\n    return true;\n  };\n\nconst handleSubmit = async (e) => {\n     e.preventDefault();\n     \n     if (!validateForm()) {\n       return;\n     }\n\n     setLoading(true);\n     setError('');\n     \n     try {\n       const response = await createTransaction({\n         recipient_vpa: formData.recipient_vpa,\n         amount: parseFloat(formData.amount),\n         remarks: formData.remarks || 'Payment'\n       });\n\n       // Update user balance only when the transaction is allowed\n       if (response.status === 'success' && response.transaction?.action === 'ALLOW') {\n         const newBalance = user.balance - parseFloat(formData.amount);\n         const updatedUser = { ...user, balance: newBalance };\n         setUser(updatedUser);\n         localStorage.setItem('fdt_user', JSON.stringify(updatedUser));\n       }\n\n        // Set transaction result\n        setTransactionResult({\n          status: response.status,\n          transaction: response.transaction,\n          requiresConfirmation: response.requires_confirmation,\n          riskLevel: response.risk_level,\n          receiverUserId: response.receiver_user_id\n        });\n\n       // Clear cache\n       cacheManager.invalidateCategory('dashboard');\n       cacheManager.invalidateCategory('transactions');\n\n      } catch (err) {\n        // Use error handler for comprehensive error management\n        const errorInfo = errorHandler.handleAPIError(err, 'Create Transaction');\n        setError(errorInfo.message);\n        \n        addNotification({\n          type: 'error',\n          title: errorInfo.title,\n          message: errorInfo.message,\n          category: 'error'\n        });\n      } finally {\n       setLoading(false);\n      }\n    };\n\n  const handleSelectFavorite = (favorite) => {\n    setFormData(prev => ({\n      ...prev,\n      recipient_vpa: favorite.vpa,\n      amount: favorite.amount ? favorite.amount.toString() : '',\n      remarks: favorite.remarks || ''\n    }));\n    setRecipientUser(null);\n    if (amountRef.current && favorite.amount) {\n      amountRef.current.focus();\n    }\n  };\n\n  const handleAddFavorite = () => {\n    if (formData.recipient_vpa) {\n      const newFavorite = {\n        name: recipientUser?.name || formData.recipient_vpa,\n        vpa: formData.recipient_vpa,\n        amount: formData.amount ? parseFloat(formData.amount) : null,\n        remarks: formData.remarks || ''\n      };\n      favoritesManager.addFavorite(newFavorite);\n      addNotification({\n        type: 'success',\n        title: 'Recipient Saved',\n        message: 'You can quickly access this recipient from Saved Recipients',\n        category: 'success'\n      });\n    } else {\n      setError('Please enter a recipient UPI ID first');\n    }\n  };\n\n   const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR',\n      maximumFractionDigits: 0\n    }).format(amount);\n  };\n\n  // Show transaction result if available\n  if (transactionResult) {\n    return (\n      <TransactionResult \n        result={transactionResult}\n        onBack={() => setTransactionResult(null)}\n        senderUser={user}\n      />\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-green-900 to-slate-900\">\n      {/* Animated background */}\n      <div className=\"fixed inset-0 -z-10\">\n        <div className=\"absolute top-0 left-0 w-96 h-96 bg-green-500 rounded-full filter blur-3xl opacity-20 animate-pulse\"></div>\n        <div className=\"absolute bottom-0 right-0 w-96 h-96 bg-teal-500 rounded-full filter blur-3xl opacity-20 animate-pulse delay-1000\"></div>\n      </div>\n\n       {/* Header */}\n       <div className=\"bg-black/20 backdrop-blur-xl border-b border-white/10 text-white p-6\">\n         <div className=\"flex items-center justify-between\">\n           <div className=\"flex items-center\">\n            <button\n              onClick={() => {\n                if (onLogout) onLogout();\n                navigate('/login');\n              }}\n              className=\"mr-4 p-2 hover:bg-white/10 rounded-lg transition-colors\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n           <h1 className=\"text-2xl font-bold\">Send Money</h1>\n           </div>\n           \n           {/* Switch to Fraud Detection */}\n           <button\n             onClick={() => navigate('/dashboard')}\n             className=\"flex items-center space-x-2 px-4 py-2 bg-purple-600/80 hover:bg-purple-600 text-white rounded-lg transition-colors\"\n           >\n             <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n               <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m7 0a9 9 0 11-18 0 9 9 0 0118 0z\" />\n             </svg>\n             <span className=\"text-sm font-medium\">Fraud Detection</span>\n           </button>\n         </div>\n       </div>\n\n      {/* Form */}\n      <div className=\"p-6\">\n        <div className=\"max-w-md mx-auto\">\n          {/* Balance Card */}\n          <div className=\"bg-gradient-to-br from-purple-600 to-indigo-600 rounded-xl p-6 mb-6 shadow-lg\">\n            <div className=\"text-white/80 text-sm mb-1\">Available Balance</div>\n            <div className=\"text-white text-3xl font-bold\">\n              {formatCurrency(user?.balance || 0)}\n            </div>\n          </div>\n\n          {/* Transaction Form */}\n          <form onSubmit={handleSubmit} className=\"space-y-5\">\n             {/* Recipient UPI ID */}\n             <div className=\"bg-white/10 backdrop-blur-xl rounded-xl p-5 border border-white/20 relative z-10\">\n               <label className=\"text-white/80 text-sm mb-2 block\">Recipient</label>\n               <div className=\"relative\">\n                <input\n                  type=\"text\"\n                  name=\"recipient_vpa\"\n                  value={formData.recipient_vpa}\n                  onChange={(e) => handleRecipientChange(e.target.value)}\n                  placeholder=\"Phone number or UPI ID\"\n                  className=\"w-full bg-white/10 text-white placeholder-white/40 rounded-lg px-4 py-3 border border-white/20 focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/50\"\n                  disabled={loading}\n                  autoComplete=\"off\"\n                />\n                \n                <RecipientDropdown\n                  show={showDropdown}\n                  results={searchResults}\n                  onSelect={handleRecipientSelect}\n                  onClose={() => setShowDropdown(false)}\n                />\n              </div>\n              \n              {/* Show selected recipient info */}\n              {recipientUser && (\n                <div className=\"mt-3 bg-green-500/20 border border-green-500/30 px-3 py-2 rounded-lg\">\n                  <div className=\"flex items-center\">\n                    <svg className=\"w-4 h-4 text-green-400 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z\" />\n                    </svg>\n                    <div>\n                      <div className=\"text-white font-semibold\">{recipientUser.name}</div>\n                      <div className=\"text-green-300 text-sm\">{recipientUser.upi_id}</div>\n                    </div>\n                  </div>\n                </div>\n              )}\n            </div>\n\n            {/* Amount */}\n            <div className=\"bg-white/10 backdrop-blur-xl rounded-xl p-5 border border-white/20\">\n              <label className=\"text-white/80 text-sm mb-2 block\">Amount (₹)</label>\n              <input\n                ref={amountRef}\n                type=\"text\"\n                name=\"amount\"\n                value={formData.amount}\n                onChange={handleAmountChange}\n                placeholder=\"0.00\"\n                className=\"w-full bg-white/10 text-white placeholder-white/40 rounded-lg px-4 py-3 border border-white/20 focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/50 text-2xl font-semibold\"\n                disabled={loading}\n              />\n              <div className=\"mt-3 flex space-x-3\">\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData(prev => ({ ...prev, amount: '500' }))}\n                  className=\"px-3 py-1 bg-white/20 text-white/80 rounded-lg hover:bg-white/30 text-sm\"\n                  disabled={loading}\n                >\n                  ₹500\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData(prev => ({ ...prev, amount: '1000' }))}\n                  className=\"px-3 py-1 bg-white/20 text-white/80 rounded-lg hover:bg-white/30 text-sm\"\n                  disabled={loading}\n                >\n                  ₹1,000\n                </button>\n                <button\n                  type=\"button\"\n                  onClick={() => setFormData(prev => ({ ...prev, amount: '5000' }))}\n                  className=\"px-3 py-1 bg-white/20 text-white/80 rounded-lg hover:bg-white/30 text-sm\"\n                  disabled={loading}\n                >\n                  ₹5,000\n                </button>\n              </div>\n            </div>\n\n            {/* Remarks */}\n            <div className=\"bg-white/10 backdrop-blur-xl rounded-xl p-5 border border-white/20\">\n              <label className=\"text-white/80 text-sm mb-2 block\">Remarks (Optional)</label>\n              <input\n                type=\"text\"\n                name=\"remarks\"\n                value={formData.remarks}\n                onChange={handleChange}\n                placeholder=\"Add a note...\"\n                className=\"w-full bg-white/10 text-white placeholder-white/40 rounded-lg px-4 py-3 border border-white/20 focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-400/50\"\n                disabled={loading}\n              />\n             </div>\n\n             {/* Quick Actions */}\n             <div className=\"grid grid-cols-2 gap-3\">\n               <button\n                 type=\"button\"\n                 onClick={() => setShowFavoritesModal(true)}\n                 className=\"flex items-center justify-center space-x-2 px-4 py-3 bg-yellow-600/80 hover:bg-yellow-600 text-white rounded-lg transition-colors text-sm font-medium\"\n                 disabled={loading}\n               >\n                 <svg className=\"w-4 h-4\" fill=\"currentColor\" viewBox=\"0 0 24 24\">\n                   <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\" />\n                 </svg>\n                 <span>Saved Recipients</span>\n               </button>\n               <button\n                 type=\"button\"\n                 onClick={handleAddFavorite}\n                 className=\"flex items-center justify-center space-x-2 px-4 py-3 bg-green-600/80 hover:bg-green-600 text-white rounded-lg transition-colors text-sm font-medium\"\n                 disabled={loading || !formData.recipient_vpa}\n               >\n                 <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                   <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 6v6m0 0v6m0-6h6m0 0h6\" />\n                 </svg>\n                 <span>Save Recipient</span>\n               </button>\n             </div>\n\n             {/* Error Message */}\n            {error && (\n              <div className=\"bg-red-500/20 backdrop-blur-xl border border-red-500/50 rounded-xl p-4\">\n                <div className=\"flex items-center\">\n                  <svg className=\"w-5 h-5 text-red-400 mr-3\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                    <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\" clipRule=\"evenodd\" />\n                  </svg>\n                  <span className=\"text-red-100\">{error}</span>\n                </div>\n              </div>\n            )}\n\n            {/* Submit Button */}\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-semibold py-4 rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center\"\n            >\n              {loading ? (\n                <>\n                  <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n                  Processing...\n                </>\n              ) : (\n                <>\n                  <svg className=\"w-5 h-5 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M13 7l5 5m0 0l-5 5m5-5H6\" />\n                  </svg>\n                  Send Money\n                </>\n              )}\n            </button>\n          </form>\n\n          {/* Security Info */}\n          <div className=\"mt-6 p-4 bg-white/5 backdrop-blur-xl rounded-xl border border-white/10\">\n            <div className=\"flex items-start\">\n              <svg className=\"w-5 h-5 text-purple-400 mr-3 mt-0.5 flex-shrink-0\" fill=\"currentColor\" viewBox=\"0 0 20 20\">\n                <path fillRule=\"evenodd\" d=\"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z\" clipRule=\"evenodd\" />\n              </svg>\n              <div className=\"text-white/60 text-sm\">\n                <strong className=\"text-white/80\">Protected by AI:</strong> All transactions are analyzed in real-time for fraud detection to keep your money safe.\n              </div>\n            </div>\n          </div>\n         </div>\n       </div>\n       \n       {/* Favorites Modal */}\n       <FavoritesModal\n         isOpen={showFavoritesModal}\n         onClose={() => setShowFavoritesModal(false)}\n         onSelectFavorite={handleSelectFavorite}\n         onAddNew={() => setShowFavoritesModal(false)}\n       />\n     </div>\n   );\n };\n \n export default SendMoney;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}