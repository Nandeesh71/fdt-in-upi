{"ast":null,"code":"import _objectSpread from\"/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{getUserTransactions,confirmTransaction,cancelTransaction}from'../api';import{useNotifications}from'./NotificationSystem';import cacheManager from'../utils/cacheManager';import{exportToCSV,exportToJSON,exportToDetailedReport,exportToTXT,exportToXML}from'../utils/exportUtils';import{formatTimestamp}from'../utils/helpers';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const TransactionHistory=_ref=>{let{user}=_ref;const navigate=useNavigate();const{addNotification}=useNotifications();const[transactions,setTransactions]=useState([]);const[filteredTransactions,setFilteredTransactions]=useState([]);const[loading,setLoading]=useState(true);const[filter,setFilter]=useState('all');const[error,setError]=useState('');const[expandedTransaction,setExpandedTransaction]=useState(null);const[processingAction,setProcessingAction]=useState(null);// Search and filter state\nconst[searchQuery,setSearchQuery]=useState('');const[dateFilter,setDateFilter]=useState('all');// all, today, week, month\nconst[amountMin,setAmountMin]=useState('');const[amountMax,setAmountMax]=useState('');const[riskFilter,setRiskFilter]=useState('all');// all, low, medium, high\nconst[sortBy,setSortBy]=useState('newest');// newest, oldest, amount-high, amount-low\n// Export modal state\nconst[showExportModal,setShowExportModal]=useState(false);const[exportDateRange,setExportDateRange]=useState('all');const[exportFormat,setExportFormat]=useState('csv');const[exportCustomStart,setExportCustomStart]=useState('');const[exportCustomEnd,setExportCustomEnd]=useState('');const[exportError,setExportError]=useState('');// Apply all filters and search when transactions or filters change\nuseEffect(()=>{applyFiltersAndSearch();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[transactions,filter,searchQuery,dateFilter,amountMin,amountMax,riskFilter,sortBy]);useEffect(()=>{loadTransactions();// eslint-disable-next-line react-hooks/exhaustive-deps\n},[filter]);const loadTransactions=async function(){let forceRefresh=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;try{setLoading(true);setError('');// Clear any previous errors\nconst statusFilter=filter==='all'?null:filter.toUpperCase();// Reduced from 50 to 20 for faster initial load - users can load more if needed\nconst data=await getUserTransactions(20,statusFilter,forceRefresh);setTransactions(data.transactions||[]);}catch(err){console.error('TransactionHistory load error:',err);setError('Failed to load transactions. Please try again.');}finally{setLoading(false);}};useEffect(()=>{const interval=setInterval(()=>{loadTransactions(true);},30000);return()=>clearInterval(interval);// eslint-disable-next-line react-hooks/exhaustive-deps\n},[filter]);const formatCurrency=amount=>{return new Intl.NumberFormat('en-IN',{style:'currency',currency:'INR'}).format(amount);};const formatDate=dateString=>{return formatTimestamp(dateString,'en-IN',{month:'short',day:'numeric',year:'numeric',hour:'2-digit',minute:'2-digit'});};const getStatusBadge=action=>{const badges={ALLOW:{bg:'bg-green-100',text:'text-green-800',label:'Success'},DELAY:{bg:'bg-yellow-100',text:'text-yellow-800',label:'Pending'},BLOCK:{bg:'bg-red-100',text:'text-red-800',label:'Blocked'}};const badge=badges[action]||badges.ALLOW;return/*#__PURE__*/_jsx(\"span\",{className:\"px-2 py-1 text-xs font-semibold rounded-full \".concat(badge.bg,\" \").concat(badge.text),children:badge.label});};const getRiskLevel=riskScore=>{const score=parseFloat(riskScore)*100;if(score>=60)return'high';if(score>=30)return'medium';return'low';};const applyFiltersAndSearch=()=>{let result=[...transactions];// Filter by status\nif(filter!=='all'){result=result.filter(tx=>tx.action.toLowerCase()===filter.toLowerCase());}// Search by recipient or transaction ID\nif(searchQuery.trim()){const query=searchQuery.toLowerCase();result=result.filter(tx=>tx.recipient_vpa.toLowerCase().includes(query)||tx.tx_id.toLowerCase().includes(query)||tx.remarks&&tx.remarks.toLowerCase().includes(query));}// Filter by date range\nconst now=new Date();const txDate=tx=>new Date(tx.created_at);if(dateFilter==='today'){const today=new Date(now.getFullYear(),now.getMonth(),now.getDate());result=result.filter(tx=>txDate(tx)>=today);}else if(dateFilter==='week'){const weekAgo=new Date(now.getTime()-7*24*60*60*1000);result=result.filter(tx=>txDate(tx)>=weekAgo);}else if(dateFilter==='month'){const monthAgo=new Date(now.getFullYear(),now.getMonth()-1,now.getDate());result=result.filter(tx=>txDate(tx)>=monthAgo);}// Filter by amount range\nif(amountMin){const min=parseFloat(amountMin);result=result.filter(tx=>tx.amount>=min);}if(amountMax){const max=parseFloat(amountMax);result=result.filter(tx=>tx.amount<=max);}// Filter by risk level\nif(riskFilter!=='all'){result=result.filter(tx=>getRiskLevel(tx.risk_score)===riskFilter);}// Sort\nif(sortBy==='newest'){result.sort((a,b)=>new Date(b.created_at)-new Date(a.created_at));}else if(sortBy==='oldest'){result.sort((a,b)=>new Date(a.created_at)-new Date(b.created_at));}else if(sortBy==='amount-high'){result.sort((a,b)=>b.amount-a.amount);}else if(sortBy==='amount-low'){result.sort((a,b)=>a.amount-b.amount);}setFilteredTransactions(result);};const clearFilters=()=>{setSearchQuery('');setDateFilter('all');setAmountMin('');setAmountMax('');setRiskFilter('all');setSortBy('newest');setFilter('all');};const hasActiveFilters=()=>{return searchQuery||dateFilter!=='all'||amountMin||amountMax||riskFilter!=='all'||sortBy!=='newest'||filter!=='all';};const getExplanation=(action,riskScore,reasons)=>{if(action==='ALLOW'){return{title:'âœ… Transaction Approved',message:'This transaction passed all security checks and was processed successfully.',color:'green',details:['Recipient verification passed','Amount within normal limits','Device recognized as trusted']};}else if(action==='DELAY'){return{title:'â³ Transaction Under Review',message:\"This transaction requires additional verification due to detected risk factors. Your account is protected while we verify this transaction.\",color:'yellow',details:(reasons===null||reasons===void 0?void 0:reasons.length)>0?reasons:['Unusual transaction pattern detected','Amount requires verification','New recipient detected']};}else if(action==='BLOCK'){return{title:'ðŸš« Transaction Blocked',message:'This transaction was blocked to protect your account from potential fraud. Our AI detected high-risk patterns.',color:'red',details:(reasons===null||reasons===void 0?void 0:reasons.length)>0?reasons:['Multiple suspicious factors detected','High transaction amount','Suspicious recipient pattern']};}return{title:'Unknown Status',message:'Transaction status not recognized.',color:'gray',details:[]};};const toggleExplanation=txId=>{setExpandedTransaction(expandedTransaction===txId?null:txId);};const handleQuickAction=async(txId,decision)=>{setProcessingAction(\"\".concat(txId,\"-\").concat(decision));try{var _response$transaction;let response;if(decision==='confirm'){response=await confirmTransaction(txId);}else if(decision==='cancel'){response=await cancelTransaction(txId);}// Clear transaction cache to ensure fresh data on next load\ncacheManager.invalidateCategory('transactions');cacheManager.invalidateCategory('dashboard');// Update the transaction locally immediately with response from backend\nconst updatedAction=((_response$transaction=response.transaction)===null||_response$transaction===void 0?void 0:_response$transaction.action)||(decision==='confirm'?'ALLOW':'BLOCK');setTransactions(prevTransactions=>prevTransactions.map(tx=>tx.tx_id===txId?_objectSpread(_objectSpread({},tx),{},{action:updatedAction}):tx));addNotification({type:'transaction_resolved',title:\"Transaction \".concat(decision==='confirm'?'Confirmed':'Rejected'),message:\"Transaction has been processed successfully.\",category:'success'});setExpandedTransaction(null);}catch(error){console.error('Decision error:',error);addNotification({type:'error',title:'Action Failed',message:'Unable to process your decision. Please try again.',category:'error'});}finally{setProcessingAction(null);}};const openExportModal=()=>{setExportDateRange('all');setExportFormat('csv');setExportCustomStart('');setExportCustomEnd('');setExportError('');setShowExportModal(true);};const filterTransactionsForExport=baseTransactions=>{if(!baseTransactions||baseTransactions.length===0){return{transactions:[],error:null};}const now=new Date();const txDate=tx=>new Date(tx.created_at);if(exportDateRange==='today'){const today=new Date(now.getFullYear(),now.getMonth(),now.getDate());return{transactions:baseTransactions.filter(tx=>txDate(tx)>=today),error:null};}if(exportDateRange==='week'){const weekAgo=new Date(now.getTime()-7*24*60*60*1000);return{transactions:baseTransactions.filter(tx=>txDate(tx)>=weekAgo),error:null};}if(exportDateRange==='month'){const monthAgo=new Date(now.getFullYear(),now.getMonth()-1,now.getDate());return{transactions:baseTransactions.filter(tx=>txDate(tx)>=monthAgo),error:null};}if(exportDateRange==='custom'){if(!exportCustomStart||!exportCustomEnd){return{transactions:[],error:'Please select both start and end dates.'};}const startDate=new Date(\"\".concat(exportCustomStart,\"T00:00:00\"));const endDate=new Date(\"\".concat(exportCustomEnd,\"T23:59:59\"));if(startDate>endDate){return{transactions:[],error:'Start date must be before end date.'};}return{transactions:baseTransactions.filter(tx=>{const createdAt=txDate(tx);return createdAt>=startDate&&createdAt<=endDate;}),error:null};}return{transactions:baseTransactions,error:null};};const handleExport=()=>{setExportError('');const baseTransactions=filteredTransactions;const{transactions:exportTransactions,error}=filterTransactionsForExport(baseTransactions);if(error){setExportError(error);return;}if(!exportTransactions||exportTransactions.length===0){setExportError('No transactions found for the selected range.');return;}if(exportFormat==='csv'){exportToCSV(exportTransactions,'FDT_Transactions');}else if(exportFormat==='json'){exportToJSON(exportTransactions,'FDT_Transactions');}else if(exportFormat==='txt'){exportToTXT(exportTransactions,'FDT_Transactions');}else if(exportFormat==='xml'){exportToXML(exportTransactions,'FDT_Transactions');}setShowExportModal(false);};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 pb-6\",\"data-testid\":\"transaction-history-screen\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"fixed inset-0 -z-10\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-0 left-0 w-96 h-96 bg-purple-500 rounded-full filter blur-3xl opacity-20 animate-pulse\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute bottom-0 right-0 w-96 h-96 bg-indigo-500 rounded-full filter blur-3xl opacity-20 animate-pulse delay-1000\"}),/*#__PURE__*/_jsx(\"div\",{className:\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-pink-500 rounded-full filter blur-3xl opacity-10 animate-pulse delay-500\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"bg-black/20 backdrop-blur-xl border-b border-white/10 text-white p-6 pb-8\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate('/dashboard'),className:\"mr-4 text-purple-300 hover:text-white transition-colors\",\"data-testid\":\"back-button\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 19l-7-7 7-7\"})})}),/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold\",children:\"Transaction monitor\"})]}),transactions.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:openExportModal,className:\"flex items-center space-x-2 px-3 py-2 bg-indigo-600/80 hover:bg-indigo-600 text-white text-sm rounded-lg transition-colors\",title:\"Export transactions\",\"data-testid\":\"export-button\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Export\"})]}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>exportToDetailedReport(filteredTransactions.length>0?filteredTransactions:transactions,'FDT_Report'),className:\"flex items-center space-x-2 px-3 py-2 bg-purple-600/80 hover:bg-purple-600 text-white text-sm rounded-lg transition-colors\",title:\"Export detailed report as HTML\",\"data-testid\":\"export-report-button\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"})}),/*#__PURE__*/_jsx(\"span\",{children:\"Report\"})]})]})]})}),showExportModal&&/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-slate-900 rounded-2xl p-6 max-w-lg w-full mx-4 border border-white/20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white text-lg font-semibold\",children:\"Export Transactions\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowExportModal(false),className:\"text-purple-300 hover:text-white transition\",\"aria-label\":\"Close export modal\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"Date Range\"}),/*#__PURE__*/_jsxs(\"select\",{value:exportDateRange,onChange:e=>{setExportDateRange(e.target.value);setExportError('');},className:\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",className:\"text-gray-900\",children:\"All Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"today\",className:\"text-gray-900\",children:\"Today\"}),/*#__PURE__*/_jsx(\"option\",{value:\"week\",className:\"text-gray-900\",children:\"Last 7 Days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"month\",className:\"text-gray-900\",children:\"Last 30 Days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"custom\",className:\"text-gray-900\",children:\"Custom Date Range\"})]})]}),exportDateRange==='custom'&&/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 sm:grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"Start Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:exportCustomStart,onChange:e=>{setExportCustomStart(e.target.value);setExportError('');},className:\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"End Date\"}),/*#__PURE__*/_jsx(\"input\",{type:\"date\",value:exportCustomEnd,onChange:e=>{setExportCustomEnd(e.target.value);setExportError('');},className:\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"Format\"}),/*#__PURE__*/_jsxs(\"select\",{value:exportFormat,onChange:e=>setExportFormat(e.target.value),className:\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"csv\",className:\"text-gray-900\",children:\"CSV\"}),/*#__PURE__*/_jsx(\"option\",{value:\"json\",className:\"text-gray-900\",children:\"JSON\"}),/*#__PURE__*/_jsx(\"option\",{value:\"txt\",className:\"text-gray-900\",children:\"Text (TXT)\"}),/*#__PURE__*/_jsx(\"option\",{value:\"xml\",className:\"text-gray-900\",children:\"XML\"})]})]}),exportError&&/*#__PURE__*/_jsx(\"div\",{className:\"text-sm text-red-300\",children:exportError})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-end space-x-2 mt-6\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setShowExportModal(false),className:\"px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm rounded-lg transition\",children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{onClick:handleExport,className:\"px-4 py-2 bg-indigo-600/80 hover:bg-indigo-600 text-white text-sm rounded-lg transition\",children:\"Export\"})]})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"px-6 -mt-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search by recipient, transaction ID, or remarks...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),className:\"w-full px-4 py-3 pl-12 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 transition\",\"data-testid\":\"search-input\"}),/*#__PURE__*/_jsx(\"svg\",{className:\"absolute left-4 top-3.5 w-5 h-5 text-purple-300\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-xl shadow-lg p-4 mb-6 border border-white/20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-white font-semibold\",children:\"Advanced Filters\"}),hasActiveFilters()&&/*#__PURE__*/_jsx(\"button\",{onClick:clearFilters,className:\"text-sm text-purple-300 hover:text-white transition\",\"data-testid\":\"clear-filters-button\",children:\"Clear All\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"Date Range\"}),/*#__PURE__*/_jsxs(\"select\",{value:dateFilter,onChange:e=>setDateFilter(e.target.value),className:\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\",\"data-testid\":\"date-filter\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",className:\"text-gray-900\",children:\"All Time\"}),/*#__PURE__*/_jsx(\"option\",{value:\"today\",className:\"text-gray-900\",children:\"Today\"}),/*#__PURE__*/_jsx(\"option\",{value:\"week\",className:\"text-gray-900\",children:\"Last 7 Days\"}),/*#__PURE__*/_jsx(\"option\",{value:\"month\",className:\"text-gray-900\",children:\"Last 30 Days\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"Min Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"\\u20B90\",value:amountMin,onChange:e=>setAmountMin(e.target.value),className:\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 transition\",\"data-testid\":\"amount-min-filter\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"Max Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",placeholder:\"\\u20B91,00,000\",value:amountMax,onChange:e=>setAmountMax(e.target.value),className:\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 transition\",\"data-testid\":\"amount-max-filter\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"Risk Level\"}),/*#__PURE__*/_jsxs(\"select\",{value:riskFilter,onChange:e=>setRiskFilter(e.target.value),className:\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\",\"data-testid\":\"risk-filter\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"all\",className:\"text-gray-900\",children:\"All Risks\"}),/*#__PURE__*/_jsx(\"option\",{value:\"low\",className:\"text-gray-900\",children:\"Low Risk\"}),/*#__PURE__*/_jsx(\"option\",{value:\"medium\",className:\"text-gray-900\",children:\"Medium Risk\"}),/*#__PURE__*/_jsx(\"option\",{value:\"high\",className:\"text-gray-900\",children:\"High Risk\"})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-4 pt-4 border-t border-white/20\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-xs font-semibold text-purple-300 mb-2\",children:\"Sort By\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex flex-wrap gap-2\",children:[{value:'newest',label:'Newest First'},{value:'oldest',label:'Oldest First'},{value:'amount-high',label:'Amount (High to Low)'},{value:'amount-low',label:'Amount (Low to High)'}].map(option=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSortBy(option.value),className:\"px-3 py-1 text-xs rounded-lg transition \".concat(sortBy===option.value?'bg-purple-600 text-white':'bg-white/10 text-purple-300 hover:bg-white/20'),\"data-testid\":\"sort-\".concat(option.value),children:option.label},option.value))})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg p-2 mb-6 flex space-x-2 border border-white/20\",\"data-testid\":\"filter-tabs\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('all'),className:\"flex-1 py-2 rounded-lg font-semibold text-sm transition duration-200 \".concat(filter==='all'?'bg-purple-600 text-white':'text-purple-300 hover:bg-white/10'),\"data-testid\":\"filter-all\",children:\"All Events\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('allow'),className:\"flex-1 py-2 rounded-lg font-semibold text-sm transition duration-200 \".concat(filter==='allow'?'bg-green-600 text-white':'text-purple-300 hover:bg-white/10'),\"data-testid\":\"filter-success\",children:\"Safe\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('delay'),className:\"flex-1 py-2 rounded-lg font-semibold text-sm transition duration-200 \".concat(filter==='delay'?'bg-yellow-600 text-white':'text-purple-300 hover:bg-white/10'),\"data-testid\":\"filter-pending\",children:\"Review\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setFilter('block'),className:\"flex-1 py-2 rounded-lg font-semibold text-sm transition duration-200 \".concat(filter==='block'?'bg-red-600 text-white':'text-purple-300 hover:bg-white/10'),\"data-testid\":\"filter-blocked\",children:\"Blocked\"})]}),filteredTransactions.length!==transactions.length&&hasActiveFilters()&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4 p-4 bg-blue-500/20 border border-blue-400/30 rounded-lg text-blue-300 text-sm\",children:[\"Found \",filteredTransactions.length,\" of \",transactions.length,\" transactions\"]}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"mb-6 p-4 bg-red-900/30 border border-red-500/50 rounded-lg flex items-start justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-3\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-red-300 font-semibold\",children:\"Failed to load transactions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-red-400 text-sm\",children:error})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:loadTransactions,className:\"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors flex-shrink-0\",children:\"Retry\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"flex items-center justify-center py-20\",children:/*#__PURE__*/_jsx(\"div\",{className:\"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full spinner\"})}):error?/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500/20 border border-red-500/30 text-red-200 p-4 rounded-lg backdrop-blur-sm\",children:error}):transactions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg p-8 text-center border border-white/20\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-20 h-20 mx-auto mb-4 text-purple-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-200 font-semibold\",children:\"No security events\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-300 mt-2\",children:filter!=='all'?\"No \".concat(filter,\" events found\"):'All transactions are secure'})]}):filteredTransactions.length===0?/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg p-8 text-center border border-white/20\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-20 h-20 mx-auto mb-4 text-purple-400\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"})}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-200 font-semibold\",children:\"No matching transactions\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-sm text-purple-300 mt-2\",children:\"Try adjusting your filters\"}),hasActiveFilters()&&/*#__PURE__*/_jsx(\"button\",{onClick:clearFilters,className:\"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition\",children:\"Clear Filters\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",\"data-testid\":\"transactions-list\",children:filteredTransactions.map(tx=>{const explanation=getExplanation(tx.action,tx.risk_score,tx.fraud_reasons);const isExpanded=expandedTransaction===tx.tx_id;return/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-xl shadow-md hover:shadow-lg transition duration-200 overflow-hidden border border-white/20\",\"data-testid\":\"transaction-\".concat(tx.tx_id),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 cursor-pointer\",onClick:()=>tx.action!=='ALLOW'?toggleExplanation(tx.tx_id):null,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-3\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold text-white text-lg\",children:tx.recipient_vpa}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-purple-300 mt-1\",children:formatDate(tx.created_at)}),tx.remarks&&/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-purple-200 mt-1 italic\",children:[\"\\\"\",tx.remarks,\"\\\"\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"p\",{className:\"font-bold text-xl text-white\",children:formatCurrency(tx.amount)})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center pt-3 border-t border-white/20\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-3\",children:[getStatusBadge(tx.action),/*#__PURE__*/_jsxs(\"span\",{className:\"px-2 py-1 text-xs font-semibold rounded-full \".concat(getRiskLevel(tx.risk_score)==='high'?'bg-red-100 text-red-800':getRiskLevel(tx.risk_score)==='medium'?'bg-yellow-100 text-yellow-800':'bg-green-100 text-green-800'),children:[getRiskLevel(tx.risk_score).charAt(0).toUpperCase()+getRiskLevel(tx.risk_score).slice(1),\" Risk\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2 text-xs text-purple-300\",children:[/*#__PURE__*/_jsxs(\"span\",{children:[\"ID: \",tx.tx_id.substring(0,12),\"...\"]}),tx.action!=='ALLOW'&&/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 transition-transform duration-200 \".concat(isExpanded?'rotate-180':''),fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M19 9l-7 7-7-7\"})})]})]})]}),isExpanded&&/*#__PURE__*/_jsx(\"div\",{className:\"border-t border-\".concat(explanation.color,\"-100 bg-\").concat(explanation.color,\"-50 p-6\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex-shrink-0 w-12 h-12 bg-\".concat(explanation.color,\"-100 rounded-full flex items-center justify-center\"),children:[explanation.color==='red'&&/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-red-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 0018.364 5.636m-9 9a9 9 0 11-12.728 0m12.728 0a9 9 0 00-12.728 0M9 15h6m-3-3h.01M9 12h6\"})}),explanation.color==='yellow'&&/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6 text-yellow-600\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-1\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-bold text-\".concat(explanation.color,\"-800 mb-3 text-lg\"),children:explanation.title}),/*#__PURE__*/_jsx(\"p\",{className:\"text-\".concat(explanation.color,\"-700 mb-4 leading-relaxed\"),children:explanation.message}),explanation.details&&explanation.details.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-2\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-\".concat(explanation.color,\"-800 mb-2\"),children:\"Security Analysis:\"}),explanation.details.map((detail,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-start bg-white/50 rounded-lg p-3\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 text-amber-500 mr-2 mt-1\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m6 2a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v5a2 2 0 002 2m2 0h7a2 2 0 002-2V9a2 2 0 00-2-2h-7m-6 2l4-4m0 0l4 4\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-700\",children:detail})]},index))]}),tx.action==='DELAY'&&/*#__PURE__*/_jsxs(\"div\",{className:\"mt-6 pt-4 border-t border-gray-200\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-3\",children:[/*#__PURE__*/_jsxs(\"button\",{className:\"bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 transform hover:scale-105 flex items-center justify-center\",onClick:e=>{e.stopPropagation();handleQuickAction(tx.tx_id,'confirm');},disabled:processingAction===\"\".concat(tx.tx_id,\"-confirm\"),children:[processingAction===\"\".concat(tx.tx_id,\"-confirm\")?/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M5 13l4 4L19 7\"})}),\"Confirm\"]}),/*#__PURE__*/_jsxs(\"button\",{className:\"bg-gradient-to-r from-red-500 to-pink-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-red-600 hover:to-pink-700 transition-all duration-200 transform hover:scale-105 flex items-center justify-center\",onClick:e=>{e.stopPropagation();handleQuickAction(tx.tx_id,'cancel');},disabled:processingAction===\"\".concat(tx.txId,\"-cancel\"),children:[processingAction===\"\".concat(tx.tx_id,\"-cancel\")?/*#__PURE__*/_jsx(\"div\",{className:\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M6 18L18 6M6 6l12 12\"})}),\"Cancel\"]})]}),/*#__PURE__*/_jsxs(\"button\",{className:\"w-full mt-3 bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl hover:bg-gray-300 transition-all duration-200 flex items-center justify-center\",onClick:e=>{e.stopPropagation();navigate(\"/fraud-alert/\".concat(tx.tx_id));},children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"w-4 h-4 mr-2\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\"}),/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\"})]}),\"View Details\"]})]})]})]})})]},tx.tx_id);})})]})]});};export default TransactionHistory;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","getUserTransactions","confirmTransaction","cancelTransaction","useNotifications","cacheManager","exportToCSV","exportToJSON","exportToDetailedReport","exportToTXT","exportToXML","formatTimestamp","jsx","_jsx","jsxs","_jsxs","TransactionHistory","_ref","user","navigate","addNotification","transactions","setTransactions","filteredTransactions","setFilteredTransactions","loading","setLoading","filter","setFilter","error","setError","expandedTransaction","setExpandedTransaction","processingAction","setProcessingAction","searchQuery","setSearchQuery","dateFilter","setDateFilter","amountMin","setAmountMin","amountMax","setAmountMax","riskFilter","setRiskFilter","sortBy","setSortBy","showExportModal","setShowExportModal","exportDateRange","setExportDateRange","exportFormat","setExportFormat","exportCustomStart","setExportCustomStart","exportCustomEnd","setExportCustomEnd","exportError","setExportError","applyFiltersAndSearch","loadTransactions","forceRefresh","arguments","length","undefined","statusFilter","toUpperCase","data","err","console","interval","setInterval","clearInterval","formatCurrency","amount","Intl","NumberFormat","style","currency","format","formatDate","dateString","month","day","year","hour","minute","getStatusBadge","action","badges","ALLOW","bg","text","label","DELAY","BLOCK","badge","className","concat","children","getRiskLevel","riskScore","score","parseFloat","result","tx","toLowerCase","trim","query","recipient_vpa","includes","tx_id","remarks","now","Date","txDate","created_at","today","getFullYear","getMonth","getDate","weekAgo","getTime","monthAgo","min","max","risk_score","sort","a","b","clearFilters","hasActiveFilters","getExplanation","reasons","title","message","color","details","toggleExplanation","txId","handleQuickAction","decision","_response$transaction","response","invalidateCategory","updatedAction","transaction","prevTransactions","map","_objectSpread","type","category","openExportModal","filterTransactionsForExport","baseTransactions","startDate","endDate","createdAt","handleExport","exportTransactions","onClick","fill","stroke","viewBox","strokeLinecap","strokeLinejoin","strokeWidth","d","value","onChange","e","target","placeholder","option","explanation","fraud_reasons","isExpanded","charAt","slice","substring","detail","index","stopPropagation","disabled"],"sources":["/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/src/components/TransactionHistory.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { getUserTransactions, confirmTransaction, cancelTransaction } from '../api';\nimport { useNotifications } from './NotificationSystem';\nimport cacheManager from '../utils/cacheManager';\nimport { exportToCSV, exportToJSON, exportToDetailedReport, exportToTXT, exportToXML } from '../utils/exportUtils';\nimport { formatTimestamp } from '../utils/helpers';\n\nconst TransactionHistory = ({ user }) => {\n  const navigate = useNavigate();\n  const { addNotification } = useNotifications();\n  const [transactions, setTransactions] = useState([]);\n  const [filteredTransactions, setFilteredTransactions] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [filter, setFilter] = useState('all');\n  const [error, setError] = useState('');\n  const [expandedTransaction, setExpandedTransaction] = useState(null);\n  const [processingAction, setProcessingAction] = useState(null);\n  \n  // Search and filter state\n  const [searchQuery, setSearchQuery] = useState('');\n  const [dateFilter, setDateFilter] = useState('all'); // all, today, week, month\n  const [amountMin, setAmountMin] = useState('');\n  const [amountMax, setAmountMax] = useState('');\n  const [riskFilter, setRiskFilter] = useState('all'); // all, low, medium, high\n  const [sortBy, setSortBy] = useState('newest'); // newest, oldest, amount-high, amount-low\n\n  // Export modal state\n  const [showExportModal, setShowExportModal] = useState(false);\n  const [exportDateRange, setExportDateRange] = useState('all');\n  const [exportFormat, setExportFormat] = useState('csv');\n  const [exportCustomStart, setExportCustomStart] = useState('');\n  const [exportCustomEnd, setExportCustomEnd] = useState('');\n  const [exportError, setExportError] = useState('');\n\n  // Apply all filters and search when transactions or filters change\n  useEffect(() => {\n    applyFiltersAndSearch();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [transactions, filter, searchQuery, dateFilter, amountMin, amountMax, riskFilter, sortBy]);\n\n  useEffect(() => {\n    loadTransactions();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filter]);\n\n  const loadTransactions = async (forceRefresh = false) => {\n    try {\n      setLoading(true);\n      setError(''); // Clear any previous errors\n      const statusFilter = filter === 'all' ? null : filter.toUpperCase();\n      // Reduced from 50 to 20 for faster initial load - users can load more if needed\n      const data = await getUserTransactions(20, statusFilter, forceRefresh);\n      setTransactions(data.transactions || []);\n    } catch (err) {\n      console.error('TransactionHistory load error:', err);\n      setError('Failed to load transactions. Please try again.');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      loadTransactions(true);\n    }, 30000);\n\n    return () => clearInterval(interval);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [filter]);\n\n  const formatCurrency = (amount) => {\n    return new Intl.NumberFormat('en-IN', {\n      style: 'currency',\n      currency: 'INR'\n    }).format(amount);\n  };\n\n  const formatDate = (dateString) => {\n    return formatTimestamp(dateString, 'en-IN', {\n      month: 'short',\n      day: 'numeric',\n      year: 'numeric',\n      hour: '2-digit',\n      minute: '2-digit'\n    });\n  };\n\n  const getStatusBadge = (action) => {\n    const badges = {\n      ALLOW: { bg: 'bg-green-100', text: 'text-green-800', label: 'Success' },\n      DELAY: { bg: 'bg-yellow-100', text: 'text-yellow-800', label: 'Pending' },\n      BLOCK: { bg: 'bg-red-100', text: 'text-red-800', label: 'Blocked' }\n    };\n\n    const badge = badges[action] || badges.ALLOW;\n    return (\n      <span className={`px-2 py-1 text-xs font-semibold rounded-full ${badge.bg} ${badge.text}`}>\n        {badge.label}\n      </span>\n    );\n  };\n\n  const getRiskLevel = (riskScore) => {\n    const score = parseFloat(riskScore) * 100;\n    if (score >= 60) return 'high';\n    if (score >= 30) return 'medium';\n    return 'low';\n  };\n\n  const applyFiltersAndSearch = () => {\n    let result = [...transactions];\n\n    // Filter by status\n    if (filter !== 'all') {\n      result = result.filter(tx => tx.action.toLowerCase() === filter.toLowerCase());\n    }\n\n    // Search by recipient or transaction ID\n    if (searchQuery.trim()) {\n      const query = searchQuery.toLowerCase();\n      result = result.filter(tx =>\n        tx.recipient_vpa.toLowerCase().includes(query) ||\n        tx.tx_id.toLowerCase().includes(query) ||\n        (tx.remarks && tx.remarks.toLowerCase().includes(query))\n      );\n    }\n\n    // Filter by date range\n    const now = new Date();\n    const txDate = (tx) => new Date(tx.created_at);\n    \n    if (dateFilter === 'today') {\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n      result = result.filter(tx => txDate(tx) >= today);\n    } else if (dateFilter === 'week') {\n      const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n      result = result.filter(tx => txDate(tx) >= weekAgo);\n    } else if (dateFilter === 'month') {\n      const monthAgo = new Date(now.getFullYear(), now.getMonth() - 1, now.getDate());\n      result = result.filter(tx => txDate(tx) >= monthAgo);\n    }\n\n    // Filter by amount range\n    if (amountMin) {\n      const min = parseFloat(amountMin);\n      result = result.filter(tx => tx.amount >= min);\n    }\n    if (amountMax) {\n      const max = parseFloat(amountMax);\n      result = result.filter(tx => tx.amount <= max);\n    }\n\n    // Filter by risk level\n    if (riskFilter !== 'all') {\n      result = result.filter(tx => getRiskLevel(tx.risk_score) === riskFilter);\n    }\n\n    // Sort\n    if (sortBy === 'newest') {\n      result.sort((a, b) => new Date(b.created_at) - new Date(a.created_at));\n    } else if (sortBy === 'oldest') {\n      result.sort((a, b) => new Date(a.created_at) - new Date(b.created_at));\n    } else if (sortBy === 'amount-high') {\n      result.sort((a, b) => b.amount - a.amount);\n    } else if (sortBy === 'amount-low') {\n      result.sort((a, b) => a.amount - b.amount);\n    }\n\n    setFilteredTransactions(result);\n  };\n\n  const clearFilters = () => {\n    setSearchQuery('');\n    setDateFilter('all');\n    setAmountMin('');\n    setAmountMax('');\n    setRiskFilter('all');\n    setSortBy('newest');\n    setFilter('all');\n  };\n\n  const hasActiveFilters = () => {\n    return searchQuery || dateFilter !== 'all' || amountMin || amountMax || riskFilter !== 'all' || sortBy !== 'newest' || filter !== 'all';\n  };\n\n  const getExplanation = (action, riskScore, reasons) => {\n    if (action === 'ALLOW') {\n      return {\n        title: 'âœ… Transaction Approved',\n        message: 'This transaction passed all security checks and was processed successfully.',\n        color: 'green',\n        details: [\n          'Recipient verification passed',\n          'Amount within normal limits',\n          'Device recognized as trusted'\n        ]\n      };\n    } else if (action === 'DELAY') {\n      return {\n        title: 'â³ Transaction Under Review',\n        message: `This transaction requires additional verification due to detected risk factors. Your account is protected while we verify this transaction.`,\n        color: 'yellow',\n        details: reasons?.length > 0 ? reasons : [\n          'Unusual transaction pattern detected',\n          'Amount requires verification',\n          'New recipient detected'\n        ]\n      };\n    } else if (action === 'BLOCK') {\n      return {\n        title: 'ðŸš« Transaction Blocked',\n        message: 'This transaction was blocked to protect your account from potential fraud. Our AI detected high-risk patterns.',\n        color: 'red',\n        details: reasons?.length > 0 ? reasons : [\n          'Multiple suspicious factors detected',\n          'High transaction amount',\n          'Suspicious recipient pattern'\n        ]\n      };\n    }\n    return { title: 'Unknown Status', message: 'Transaction status not recognized.', color: 'gray', details: [] };\n  };\n\n  const toggleExplanation = (txId) => {\n    setExpandedTransaction(expandedTransaction === txId ? null : txId);\n  };\n\n  const handleQuickAction = async (txId, decision) => {\n    setProcessingAction(`${txId}-${decision}`);\n    try {\n      let response;\n      \n      if (decision === 'confirm') {\n        response = await confirmTransaction(txId);\n      } else if (decision === 'cancel') {\n        response = await cancelTransaction(txId);\n      }\n      \n      // Clear transaction cache to ensure fresh data on next load\n      cacheManager.invalidateCategory('transactions');\n      cacheManager.invalidateCategory('dashboard');\n      \n      // Update the transaction locally immediately with response from backend\n      const updatedAction = response.transaction?.action || (decision === 'confirm' ? 'ALLOW' : 'BLOCK');\n      \n      setTransactions(prevTransactions =>\n        prevTransactions.map(tx =>\n          tx.tx_id === txId\n            ? { ...tx, action: updatedAction }\n            : tx\n        )\n      );\n      \n      addNotification({\n        type: 'transaction_resolved',\n        title: `Transaction ${decision === 'confirm' ? 'Confirmed' : 'Rejected'}`,\n        message: `Transaction has been processed successfully.`,\n        category: 'success'\n      });\n      setExpandedTransaction(null);\n    } catch (error) {\n      console.error('Decision error:', error);\n      addNotification({\n        type: 'error',\n        title: 'Action Failed',\n        message: 'Unable to process your decision. Please try again.',\n        category: 'error'\n      });\n    } finally {\n      setProcessingAction(null);\n    }\n  };\n\n  const openExportModal = () => {\n    setExportDateRange('all');\n    setExportFormat('csv');\n    setExportCustomStart('');\n    setExportCustomEnd('');\n    setExportError('');\n    setShowExportModal(true);\n  };\n\n  const filterTransactionsForExport = (baseTransactions) => {\n    if (!baseTransactions || baseTransactions.length === 0) {\n      return { transactions: [], error: null };\n    }\n\n    const now = new Date();\n    const txDate = (tx) => new Date(tx.created_at);\n\n    if (exportDateRange === 'today') {\n      const today = new Date(now.getFullYear(), now.getMonth(), now.getDate());\n      return { transactions: baseTransactions.filter(tx => txDate(tx) >= today), error: null };\n    }\n\n    if (exportDateRange === 'week') {\n      const weekAgo = new Date(now.getTime() - 7 * 24 * 60 * 60 * 1000);\n      return { transactions: baseTransactions.filter(tx => txDate(tx) >= weekAgo), error: null };\n    }\n\n    if (exportDateRange === 'month') {\n      const monthAgo = new Date(now.getFullYear(), now.getMonth() - 1, now.getDate());\n      return { transactions: baseTransactions.filter(tx => txDate(tx) >= monthAgo), error: null };\n    }\n\n    if (exportDateRange === 'custom') {\n      if (!exportCustomStart || !exportCustomEnd) {\n        return { transactions: [], error: 'Please select both start and end dates.' };\n      }\n\n      const startDate = new Date(`${exportCustomStart}T00:00:00`);\n      const endDate = new Date(`${exportCustomEnd}T23:59:59`);\n\n      if (startDate > endDate) {\n        return { transactions: [], error: 'Start date must be before end date.' };\n      }\n\n      return {\n        transactions: baseTransactions.filter(tx => {\n          const createdAt = txDate(tx);\n          return createdAt >= startDate && createdAt <= endDate;\n        }),\n        error: null\n      };\n    }\n\n    return { transactions: baseTransactions, error: null };\n  };\n\n  const handleExport = () => {\n    setExportError('');\n    const baseTransactions = filteredTransactions;\n    const { transactions: exportTransactions, error } = filterTransactionsForExport(baseTransactions);\n\n    if (error) {\n      setExportError(error);\n      return;\n    }\n\n    if (!exportTransactions || exportTransactions.length === 0) {\n      setExportError('No transactions found for the selected range.');\n      return;\n    }\n\n    if (exportFormat === 'csv') {\n      exportToCSV(exportTransactions, 'FDT_Transactions');\n    } else if (exportFormat === 'json') {\n      exportToJSON(exportTransactions, 'FDT_Transactions');\n    } else if (exportFormat === 'txt') {\n      exportToTXT(exportTransactions, 'FDT_Transactions');\n    } else if (exportFormat === 'xml') {\n      exportToXML(exportTransactions, 'FDT_Transactions');\n    }\n\n    setShowExportModal(false);\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-900 via-purple-900 to-slate-900 pb-6\" data-testid=\"transaction-history-screen\">\n      {/* Animated background */}\n      <div className=\"fixed inset-0 -z-10\">\n        <div className=\"absolute top-0 left-0 w-96 h-96 bg-purple-500 rounded-full filter blur-3xl opacity-20 animate-pulse\"></div>\n        <div className=\"absolute bottom-0 right-0 w-96 h-96 bg-indigo-500 rounded-full filter blur-3xl opacity-20 animate-pulse delay-1000\"></div>\n        <div className=\"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-64 h-64 bg-pink-500 rounded-full filter blur-3xl opacity-10 animate-pulse delay-500\"></div>\n      </div>\n\n      {/* Header */}\n      <div className=\"bg-black/20 backdrop-blur-xl border-b border-white/10 text-white p-6 pb-8\">\n        <div className=\"flex items-center justify-between mb-4\">\n          <div className=\"flex items-center\">\n            <button\n              onClick={() => navigate('/dashboard')}\n              className=\"mr-4 text-purple-300 hover:text-white transition-colors\"\n              data-testid=\"back-button\"\n            >\n              <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 19l-7-7 7-7\" />\n              </svg>\n            </button>\n            <h1 className=\"text-2xl font-bold\">Transaction monitor</h1>\n          </div>\n          \n          {/* Export Buttons */}\n          {transactions.length > 0 && (\n            <div className=\"flex items-center space-x-2\">\n              <button\n                onClick={openExportModal}\n                className=\"flex items-center space-x-2 px-3 py-2 bg-indigo-600/80 hover:bg-indigo-600 text-white text-sm rounded-lg transition-colors\"\n                title=\"Export transactions\"\n                data-testid=\"export-button\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <span>Export</span>\n              </button>\n              <button\n                onClick={() => exportToDetailedReport(filteredTransactions.length > 0 ? filteredTransactions : transactions, 'FDT_Report')}\n                className=\"flex items-center space-x-2 px-3 py-2 bg-purple-600/80 hover:bg-purple-600 text-white text-sm rounded-lg transition-colors\"\n                title=\"Export detailed report as HTML\"\n                data-testid=\"export-report-button\"\n              >\n                <svg className=\"w-4 h-4\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" />\n                </svg>\n                <span>Report</span>\n              </button>\n            </div>\n          )}\n        </div>\n      </div>\n\n      {showExportModal && (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50\">\n          <div className=\"bg-slate-900 rounded-2xl p-6 max-w-lg w-full mx-4 border border-white/20\">\n            <div className=\"flex items-center justify-between mb-4\">\n              <h3 className=\"text-white text-lg font-semibold\">Export Transactions</h3>\n              <button\n                onClick={() => setShowExportModal(false)}\n                className=\"text-purple-300 hover:text-white transition\"\n                aria-label=\"Close export modal\"\n              >\n                <svg className=\"w-5 h-5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                </svg>\n              </button>\n            </div>\n\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-xs font-semibold text-purple-300 mb-2\">Date Range</label>\n                <select\n                  value={exportDateRange}\n                  onChange={(e) => {\n                    setExportDateRange(e.target.value);\n                    setExportError('');\n                  }}\n                  className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                >\n                  <option value=\"all\" className=\"text-gray-900\">All Time</option>\n                  <option value=\"today\" className=\"text-gray-900\">Today</option>\n                  <option value=\"week\" className=\"text-gray-900\">Last 7 Days</option>\n                  <option value=\"month\" className=\"text-gray-900\">Last 30 Days</option>\n                  <option value=\"custom\" className=\"text-gray-900\">Custom Date Range</option>\n                </select>\n              </div>\n\n              {exportDateRange === 'custom' && (\n                <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n                  <div>\n                    <label className=\"block text-xs font-semibold text-purple-300 mb-2\">Start Date</label>\n                    <input\n                      type=\"date\"\n                      value={exportCustomStart}\n                      onChange={(e) => {\n                        setExportCustomStart(e.target.value);\n                        setExportError('');\n                      }}\n                      className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                    />\n                  </div>\n                  <div>\n                    <label className=\"block text-xs font-semibold text-purple-300 mb-2\">End Date</label>\n                    <input\n                      type=\"date\"\n                      value={exportCustomEnd}\n                      onChange={(e) => {\n                        setExportCustomEnd(e.target.value);\n                        setExportError('');\n                      }}\n                      className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                    />\n                  </div>\n                </div>\n              )}\n\n              <div>\n                <label className=\"block text-xs font-semibold text-purple-300 mb-2\">Format</label>\n                <select\n                  value={exportFormat}\n                  onChange={(e) => setExportFormat(e.target.value)}\n                  className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                >\n                  <option value=\"csv\" className=\"text-gray-900\">CSV</option>\n                  <option value=\"json\" className=\"text-gray-900\">JSON</option>\n                  <option value=\"txt\" className=\"text-gray-900\">Text (TXT)</option>\n                  <option value=\"xml\" className=\"text-gray-900\">XML</option>\n                </select>\n              </div>\n\n              {exportError && (\n                <div className=\"text-sm text-red-300\">{exportError}</div>\n              )}\n            </div>\n\n            <div className=\"flex items-center justify-end space-x-2 mt-6\">\n              <button\n                onClick={() => setShowExportModal(false)}\n                className=\"px-4 py-2 bg-white/10 hover:bg-white/20 text-white text-sm rounded-lg transition\"\n              >\n                Cancel\n              </button>\n              <button\n                onClick={handleExport}\n                className=\"px-4 py-2 bg-indigo-600/80 hover:bg-indigo-600 text-white text-sm rounded-lg transition\"\n              >\n                Export\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n\n      <div className=\"px-6 -mt-4\">\n        {/* Search Bar */}\n        <div className=\"mb-6 relative\">\n          <input\n            type=\"text\"\n            placeholder=\"Search by recipient, transaction ID, or remarks...\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            className=\"w-full px-4 py-3 pl-12 bg-white/10 backdrop-blur-xl border border-white/20 rounded-xl text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n            data-testid=\"search-input\"\n          />\n          <svg className=\"absolute left-4 top-3.5 w-5 h-5 text-purple-300\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" />\n          </svg>\n        </div>\n\n        {/* Advanced Filters Panel */}\n        <div className=\"bg-white/10 backdrop-blur-xl rounded-xl shadow-lg p-4 mb-6 border border-white/20\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h3 className=\"text-white font-semibold\">Advanced Filters</h3>\n            {hasActiveFilters() && (\n              <button\n                onClick={clearFilters}\n                className=\"text-sm text-purple-300 hover:text-white transition\"\n                data-testid=\"clear-filters-button\"\n              >\n                Clear All\n              </button>\n            )}\n          </div>\n\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n            {/* Date Filter */}\n            <div>\n              <label className=\"block text-xs font-semibold text-purple-300 mb-2\">Date Range</label>\n              <select\n                value={dateFilter}\n                onChange={(e) => setDateFilter(e.target.value)}\n                className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                data-testid=\"date-filter\"\n              >\n                <option value=\"all\" className=\"text-gray-900\">All Time</option>\n                <option value=\"today\" className=\"text-gray-900\">Today</option>\n                <option value=\"week\" className=\"text-gray-900\">Last 7 Days</option>\n                <option value=\"month\" className=\"text-gray-900\">Last 30 Days</option>\n              </select>\n            </div>\n\n            {/* Amount Min */}\n            <div>\n              <label className=\"block text-xs font-semibold text-purple-300 mb-2\">Min Amount</label>\n              <input\n                type=\"number\"\n                placeholder=\"â‚¹0\"\n                value={amountMin}\n                onChange={(e) => setAmountMin(e.target.value)}\n                className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                data-testid=\"amount-min-filter\"\n              />\n            </div>\n\n            {/* Amount Max */}\n            <div>\n              <label className=\"block text-xs font-semibold text-purple-300 mb-2\">Max Amount</label>\n              <input\n                type=\"number\"\n                placeholder=\"â‚¹1,00,000\"\n                value={amountMax}\n                onChange={(e) => setAmountMax(e.target.value)}\n                className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-purple-300 focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                data-testid=\"amount-max-filter\"\n              />\n            </div>\n\n            {/* Risk Level Filter */}\n            <div>\n              <label className=\"block text-xs font-semibold text-purple-300 mb-2\">Risk Level</label>\n              <select\n                value={riskFilter}\n                onChange={(e) => setRiskFilter(e.target.value)}\n                className=\"w-full px-3 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-purple-500 transition\"\n                data-testid=\"risk-filter\"\n              >\n                <option value=\"all\" className=\"text-gray-900\">All Risks</option>\n                <option value=\"low\" className=\"text-gray-900\">Low Risk</option>\n                <option value=\"medium\" className=\"text-gray-900\">Medium Risk</option>\n                <option value=\"high\" className=\"text-gray-900\">High Risk</option>\n              </select>\n            </div>\n          </div>\n\n          {/* Sort Options */}\n          <div className=\"mt-4 pt-4 border-t border-white/20\">\n            <label className=\"block text-xs font-semibold text-purple-300 mb-2\">Sort By</label>\n            <div className=\"flex flex-wrap gap-2\">\n              {[\n                { value: 'newest', label: 'Newest First' },\n                { value: 'oldest', label: 'Oldest First' },\n                { value: 'amount-high', label: 'Amount (High to Low)' },\n                { value: 'amount-low', label: 'Amount (Low to High)' }\n              ].map(option => (\n                <button\n                  key={option.value}\n                  onClick={() => setSortBy(option.value)}\n                  className={`px-3 py-1 text-xs rounded-lg transition ${\n                    sortBy === option.value\n                      ? 'bg-purple-600 text-white'\n                      : 'bg-white/10 text-purple-300 hover:bg-white/20'\n                  }`}\n                  data-testid={`sort-${option.value}`}\n                >\n                  {option.label}\n                </button>\n              ))}\n            </div>\n          </div>\n        </div>\n        <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg p-2 mb-6 flex space-x-2 border border-white/20\" data-testid=\"filter-tabs\">\n          <button\n            onClick={() => setFilter('all')}\n            className={`flex-1 py-2 rounded-lg font-semibold text-sm transition duration-200 ${\n              filter === 'all'\n                ? 'bg-purple-600 text-white'\n                : 'text-purple-300 hover:bg-white/10'\n            }`}\n            data-testid=\"filter-all\"\n          >\n            All Events\n          </button>\n          <button\n            onClick={() => setFilter('allow')}\n            className={`flex-1 py-2 rounded-lg font-semibold text-sm transition duration-200 ${\n              filter === 'allow'\n                ? 'bg-green-600 text-white'\n                : 'text-purple-300 hover:bg-white/10'\n            }`}\n            data-testid=\"filter-success\"\n          >\n            Safe\n          </button>\n          <button\n            onClick={() => setFilter('delay')}\n            className={`flex-1 py-2 rounded-lg font-semibold text-sm transition duration-200 ${\n              filter === 'delay'\n                ? 'bg-yellow-600 text-white'\n                : 'text-purple-300 hover:bg-white/10'\n            }`}\n            data-testid=\"filter-pending\"\n          >\n            Review\n          </button>\n          <button\n            onClick={() => setFilter('block')}\n            className={`flex-1 py-2 rounded-lg font-semibold text-sm transition duration-200 ${\n              filter === 'block'\n                ? 'bg-red-600 text-white'\n                : 'text-purple-300 hover:bg-white/10'\n            }`}\n            data-testid=\"filter-blocked\"\n          >\n            Blocked\n          </button>\n        </div>\n\n        {/* Results Summary */}\n        {filteredTransactions.length !== transactions.length && hasActiveFilters() && (\n          <div className=\"mb-4 p-4 bg-blue-500/20 border border-blue-400/30 rounded-lg text-blue-300 text-sm\">\n            Found {filteredTransactions.length} of {transactions.length} transactions\n          </div>\n        )}\n\n        {/* Transactions List */}\n        {error && (\n          <div className=\"mb-6 p-4 bg-red-900/30 border border-red-500/50 rounded-lg flex items-start justify-between\">\n            <div className=\"flex items-start space-x-3\">\n              <svg className=\"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 8v4m0 4v.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z\" />\n              </svg>\n              <div>\n                <p className=\"text-red-300 font-semibold\">Failed to load transactions</p>\n                <p className=\"text-red-400 text-sm\">{error}</p>\n              </div>\n            </div>\n            <button\n              onClick={loadTransactions}\n              className=\"px-3 py-1 bg-red-600 hover:bg-red-700 text-white text-sm rounded transition-colors flex-shrink-0\"\n            >\n              Retry\n            </button>\n          </div>\n        )}\n\n        {loading ? (\n          <div className=\"flex items-center justify-center py-20\">\n            <div className=\"w-12 h-12 border-4 border-indigo-600 border-t-transparent rounded-full spinner\"></div>\n          </div>\n        ) : error ? (\n          <div className=\"bg-red-500/20 border border-red-500/30 text-red-200 p-4 rounded-lg backdrop-blur-sm\">\n            {error}\n          </div>\n         ) : transactions.length === 0 ? (\n           <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg p-8 text-center border border-white/20\">\n             <svg className=\"w-20 h-20 mx-auto mb-4 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n               <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\" />\n             </svg>\n             <p className=\"text-purple-200 font-semibold\">No security events</p>\n             <p className=\"text-sm text-purple-300 mt-2\">\n               {filter !== 'all' ? `No ${filter} events found` : 'All transactions are secure'}\n             </p>\n           </div>\n         ) : filteredTransactions.length === 0 ? (\n           <div className=\"bg-white/10 backdrop-blur-xl rounded-2xl shadow-lg p-8 text-center border border-white/20\">\n             <svg className=\"w-20 h-20 mx-auto mb-4 text-purple-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n               <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n             </svg>\n             <p className=\"text-purple-200 font-semibold\">No matching transactions</p>\n             <p className=\"text-sm text-purple-300 mt-2\">Try adjusting your filters</p>\n             {hasActiveFilters() && (\n               <button\n                 onClick={clearFilters}\n                 className=\"mt-4 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition\"\n               >\n                 Clear Filters\n               </button>\n             )}\n           </div>\n         ) : (\n           <div className=\"space-y-3\" data-testid=\"transactions-list\">\n             {filteredTransactions.map((tx) => {\n              const explanation = getExplanation(tx.action, tx.risk_score, tx.fraud_reasons);\n              const isExpanded = expandedTransaction === tx.tx_id;\n              \n              return (\n                <div\n                  key={tx.tx_id}\n                  className=\"bg-white/10 backdrop-blur-xl rounded-xl shadow-md hover:shadow-lg transition duration-200 overflow-hidden border border-white/20\"\n                  data-testid={`transaction-${tx.tx_id}`}\n                >\n                  <div\n                    className=\"p-4 cursor-pointer\"\n                    onClick={() => (tx.action !== 'ALLOW' ? toggleExplanation(tx.tx_id) : null)}\n                  >\n                    <div className=\"flex justify-between items-start mb-3\">\n                      <div className=\"flex-1\">\n                        <p className=\"font-semibold text-white text-lg\">{tx.recipient_vpa}</p>\n                        <p className=\"text-xs text-purple-300 mt-1\">{formatDate(tx.created_at)}</p>\n                        {tx.remarks && (\n                          <p className=\"text-sm text-purple-200 mt-1 italic\">\"{tx.remarks}\"</p>\n                        )}\n                      </div>\n                      <div className=\"text-right\">\n                        <p className=\"font-bold text-xl text-white\">{formatCurrency(tx.amount)}</p>\n                      </div>\n                    </div>\n\n                    <div className=\"flex justify-between items-center pt-3 border-t border-white/20\">\n                      <div className=\"flex items-center space-x-3\">\n                         {getStatusBadge(tx.action)}\n                         <span className={`px-2 py-1 text-xs font-semibold rounded-full ${\n                           getRiskLevel(tx.risk_score) === 'high' ? 'bg-red-100 text-red-800' :\n                           getRiskLevel(tx.risk_score) === 'medium' ? 'bg-yellow-100 text-yellow-800' :\n                           'bg-green-100 text-green-800'\n                         }`}>\n                           {getRiskLevel(tx.risk_score).charAt(0).toUpperCase() + getRiskLevel(tx.risk_score).slice(1)} Risk\n                         </span>\n                      </div>\n                      <div className=\"flex items-center space-x-2 text-xs text-purple-300\">\n                        <span>ID: {tx.tx_id.substring(0, 12)}...</span>\n                        {tx.action !== 'ALLOW' && (\n                          <svg\n                            className={`w-4 h-4 transition-transform duration-200 ${isExpanded ? 'rotate-180' : ''}`}\n                            fill=\"none\"\n                            stroke=\"currentColor\"\n                            viewBox=\"0 0 24 24\"\n                          >\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M19 9l-7 7-7-7\" />\n                          </svg>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  {isExpanded && (\n                    <div className={`border-t border-${explanation.color}-100 bg-${explanation.color}-50 p-6`}>\n                      <div className=\"flex items-start space-x-4\">\n                        <div className={`flex-shrink-0 w-12 h-12 bg-${explanation.color}-100 rounded-full flex items-center justify-center`}>\n                          {explanation.color === 'red' && (\n                            <svg className=\"w-6 h-6 text-red-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M18.364 18.364A9 9 0 005.636 5.636m12.728 12.728A9 9 0 0018.364 5.636m-9 9a9 9 0 11-12.728 0m12.728 0a9 9 0 00-12.728 0M9 15h6m-3-3h.01M9 12h6\" />\n                            </svg>\n                          )}\n                          {explanation.color === 'yellow' && (\n                            <svg className=\"w-6 h-6 text-yellow-600\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z\" />\n                            </svg>\n                          )}\n                        </div>\n                        <div className=\"flex-1\">\n                          <h4 className={`font-bold text-${explanation.color}-800 mb-3 text-lg`}>{explanation.title}</h4>\n                          <p className={`text-${explanation.color}-700 mb-4 leading-relaxed`}>{explanation.message}</p>\n                          \n                          {explanation.details && explanation.details.length > 0 && (\n                            <div className=\"space-y-2\">\n                              <p className={`text-sm font-medium text-${explanation.color}-800 mb-2`}>Security Analysis:</p>\n                              {explanation.details.map((detail, index) => (\n                                <div key={index} className=\"flex items-start bg-white/50 rounded-lg p-3\">\n                                  <svg className=\"w-4 h-4 text-amber-500 mr-2 mt-1\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M9 12l2 2 4-4m6 2a2 2 0 002-2V7a2 2 0 00-2-2H6a2 2 0 00-2 2v5a2 2 0 002 2m2 0h7a2 2 0 002-2V9a2 2 0 00-2-2h-7m-6 2l4-4m0 0l4 4\" />\n                                  </svg>\n                                  <span className=\"text-sm text-gray-700\">{detail}</span>\n                                </div>\n                              ))}\n                            </div>\n                          )}\n                          \n                          {tx.action === 'DELAY' && (\n                            <div className=\"mt-6 pt-4 border-t border-gray-200\">\n                              <div className=\"grid grid-cols-2 gap-3\">\n                                <button\n                                  className=\"bg-gradient-to-r from-green-500 to-emerald-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-green-600 hover:to-emerald-700 transition-all duration-200 transform hover:scale-105 flex items-center justify-center\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    handleQuickAction(tx.tx_id, 'confirm');\n                                  }}\n                                  disabled={processingAction === `${tx.tx_id}-confirm`}\n                                >\n                                  {processingAction === `${tx.tx_id}-confirm` ? (\n                                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n                                  ) : (\n                                    <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M5 13l4 4L19 7\" />\n                                    </svg>\n                                  )}\n                                  Confirm\n                                </button>\n                                <button\n                                  className=\"bg-gradient-to-r from-red-500 to-pink-600 text-white font-semibold py-3 px-4 rounded-xl hover:from-red-600 hover:to-pink-700 transition-all duration-200 transform hover:scale-105 flex items-center justify-center\"\n                                  onClick={(e) => {\n                                    e.stopPropagation();\n                                    handleQuickAction(tx.tx_id, 'cancel');\n                                  }}\n                                  disabled={processingAction === `${tx.txId}-cancel`}\n                                >\n                                  {processingAction === `${tx.tx_id}-cancel` ? (\n                                    <div className=\"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"></div>\n                                  ) : (\n                                    <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                      <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                                    </svg>\n                                  )}\n                                  Cancel\n                                </button>\n                              </div>\n                              <button\n                                className=\"w-full mt-3 bg-gray-200 text-gray-700 font-semibold py-3 px-6 rounded-xl hover:bg-gray-300 transition-all duration-200 flex items-center justify-center\"\n                                onClick={(e) => {\n                                  e.stopPropagation();\n                                  navigate(`/fraud-alert/${tx.tx_id}`);\n                                }}\n                              >\n                                <svg className=\"w-4 h-4 mr-2\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M15 12a3 3 0 11-6 0 3 3 0 016 0z\" />\n                                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z\" />\n                                </svg>\n                                View Details\n                              </button>\n                            </div>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              );\n            })}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default TransactionHistory;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}