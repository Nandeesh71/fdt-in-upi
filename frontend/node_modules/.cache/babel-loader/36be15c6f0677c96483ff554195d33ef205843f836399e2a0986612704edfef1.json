{"ast":null,"code":"import React,{useState,useEffect}from'react';import{isPlatformAuthenticatorAvailable,registerBiometric}from'../utils/webauthn';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const BiometricSetup=_ref=>{let{onComplete,onSkip}=_ref;const[isSupported,setIsSupported]=useState(false);const[isEnrolling,setIsEnrolling]=useState(false);const[error,setError]=useState(null);const[deviceName,setDeviceName]=useState('');useEffect(()=>{checkSupport();},[]);const checkSupport=async()=>{const available=await isPlatformAuthenticatorAvailable();setIsSupported(available);if(available){// Generate default device name\nconst platform=navigator.platform||'Unknown';const defaultName=\"\".concat(platform,\" - \").concat(new Date().toLocaleDateString());setDeviceName(defaultName);}};const handleEnroll=async()=>{setIsEnrolling(true);setError(null);try{await registerBiometric(deviceName||null);if(onComplete){onComplete();}}catch(err){console.error('Enrollment error:',err);setError(err.message||'Failed to enable biometric authentication');}finally{setIsEnrolling(false);}};if(!isSupported){return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDD12\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold text-gray-800 mb-3\",children:\"Biometric Not Available\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-6\",children:\"Your device doesn't support fingerprint or Face ID authentication. You can continue using password login.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:onSkip,className:\"w-full bg-gray-500 text-white py-3 px-4 rounded-lg hover:bg-gray-600 transition-colors\",children:\"Continue with Password\"})]})});}return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-6\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"text-6xl mb-4\",children:\"\\uD83D\\uDC46\"}),/*#__PURE__*/_jsx(\"h3\",{className:\"text-2xl font-semibold text-gray-800 mb-2\",children:\"Enable Fingerprint Login\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600\",children:\"Set up biometric authentication for faster and more secure logins\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-gray-700 mb-2\",children:\"Device Name (Optional)\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:deviceName,onChange:e=>setDeviceName(e.target.value),placeholder:\"e.g., My iPhone, Work Laptop\",className:\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\",disabled:isEnrolling}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mt-1\",children:\"This helps you identify this device in your security settings\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-sm\",children:error})}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 border border-blue-200 rounded-lg p-4\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold text-blue-900 mb-2\",children:\"Benefits:\"}),/*#__PURE__*/_jsxs(\"ul\",{className:\"text-sm text-blue-800 space-y-1\",children:[/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Login in 2 seconds with fingerprint\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 No need to remember passwords\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 More secure than traditional passwords\"}),/*#__PURE__*/_jsx(\"li\",{children:\"\\u2713 Works offline after initial setup\"})]})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleEnroll,disabled:isEnrolling,className:\"w-full py-3 px-4 rounded-lg text-white font-semibold transition-colors \".concat(isEnrolling?'bg-gray-400 cursor-not-allowed':'bg-indigo-600 hover:bg-indigo-700'),children:isEnrolling?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsxs(\"svg\",{className:\"animate-spin h-5 w-5 mr-3\",viewBox:\"0 0 24 24\",children:[/*#__PURE__*/_jsx(\"circle\",{className:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",strokeWidth:\"4\",fill:\"none\"}),/*#__PURE__*/_jsx(\"path\",{className:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"})]}),\"Setting up...\"]}):'Enable Fingerprint Login'}),/*#__PURE__*/_jsx(\"button\",{onClick:onSkip,disabled:isEnrolling,className:\"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors\",children:\"Skip for Now\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 text-center\",children:\"You can enable this later in Security Settings\"})]})]});};export default BiometricSetup;","map":{"version":3,"names":["React","useState","useEffect","isPlatformAuthenticatorAvailable","registerBiometric","jsx","_jsx","jsxs","_jsxs","BiometricSetup","_ref","onComplete","onSkip","isSupported","setIsSupported","isEnrolling","setIsEnrolling","error","setError","deviceName","setDeviceName","checkSupport","available","platform","navigator","defaultName","concat","Date","toLocaleDateString","handleEnroll","err","console","message","className","children","onClick","type","value","onChange","e","target","placeholder","disabled","viewBox","cx","cy","r","stroke","strokeWidth","fill","d"],"sources":["/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/src/components/BiometricSetup.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { \n  isPlatformAuthenticatorAvailable, \n  registerBiometric \n} from '../utils/webauthn';\n\nconst BiometricSetup = ({ onComplete, onSkip }) => {\n  const [isSupported, setIsSupported] = useState(false);\n  const [isEnrolling, setIsEnrolling] = useState(false);\n  const [error, setError] = useState(null);\n  const [deviceName, setDeviceName] = useState('');\n\n  useEffect(() => {\n    checkSupport();\n  }, []);\n\n  const checkSupport = async () => {\n    const available = await isPlatformAuthenticatorAvailable();\n    setIsSupported(available);\n    \n    if (available) {\n      // Generate default device name\n      const platform = navigator.platform || 'Unknown';\n      const defaultName = `${platform} - ${new Date().toLocaleDateString()}`;\n      setDeviceName(defaultName);\n    }\n  };\n\n  const handleEnroll = async () => {\n    setIsEnrolling(true);\n    setError(null);\n\n    try {\n      await registerBiometric(deviceName || null);\n      \n      if (onComplete) {\n        onComplete();\n      }\n    } catch (err) {\n      console.error('Enrollment error:', err);\n      setError(err.message || 'Failed to enable biometric authentication');\n    } finally {\n      setIsEnrolling(false);\n    }\n  };\n\n  if (!isSupported) {\n    return (\n      <div className=\"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl mb-4\">ðŸ”’</div>\n          <h3 className=\"text-xl font-semibold text-gray-800 mb-3\">\n            Biometric Not Available\n          </h3>\n          <p className=\"text-gray-600 mb-6\">\n            Your device doesn't support fingerprint or Face ID authentication. \n            You can continue using password login.\n          </p>\n          <button\n            onClick={onSkip}\n            className=\"w-full bg-gray-500 text-white py-3 px-4 rounded-lg hover:bg-gray-600 transition-colors\"\n          >\n            Continue with Password\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"max-w-md mx-auto p-6 bg-white rounded-lg shadow-md\">\n      <div className=\"text-center mb-6\">\n        <div className=\"text-6xl mb-4\">ðŸ‘†</div>\n        <h3 className=\"text-2xl font-semibold text-gray-800 mb-2\">\n          Enable Fingerprint Login\n        </h3>\n        <p className=\"text-gray-600\">\n          Set up biometric authentication for faster and more secure logins\n        </p>\n      </div>\n\n      <div className=\"space-y-4\">\n        <div>\n          <label className=\"block text-sm font-medium text-gray-700 mb-2\">\n            Device Name (Optional)\n          </label>\n          <input\n            type=\"text\"\n            value={deviceName}\n            onChange={(e) => setDeviceName(e.target.value)}\n            placeholder=\"e.g., My iPhone, Work Laptop\"\n            className=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n            disabled={isEnrolling}\n          />\n          <p className=\"text-xs text-gray-500 mt-1\">\n            This helps you identify this device in your security settings\n          </p>\n        </div>\n\n        {error && (\n          <div className=\"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg\">\n            <p className=\"text-sm\">{error}</p>\n          </div>\n        )}\n\n        <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-4\">\n          <h4 className=\"font-semibold text-blue-900 mb-2\">Benefits:</h4>\n          <ul className=\"text-sm text-blue-800 space-y-1\">\n            <li>âœ“ Login in 2 seconds with fingerprint</li>\n            <li>âœ“ No need to remember passwords</li>\n            <li>âœ“ More secure than traditional passwords</li>\n            <li>âœ“ Works offline after initial setup</li>\n          </ul>\n        </div>\n\n        <button\n          onClick={handleEnroll}\n          disabled={isEnrolling}\n          className={`w-full py-3 px-4 rounded-lg text-white font-semibold transition-colors ${\n            isEnrolling\n              ? 'bg-gray-400 cursor-not-allowed'\n              : 'bg-indigo-600 hover:bg-indigo-700'\n          }`}\n        >\n          {isEnrolling ? (\n            <span className=\"flex items-center justify-center\">\n              <svg className=\"animate-spin h-5 w-5 mr-3\" viewBox=\"0 0 24 24\">\n                <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\" fill=\"none\" />\n                <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" />\n              </svg>\n              Setting up...\n            </span>\n          ) : (\n            'Enable Fingerprint Login'\n          )}\n        </button>\n\n        <button\n          onClick={onSkip}\n          disabled={isEnrolling}\n          className=\"w-full bg-gray-100 text-gray-700 py-3 px-4 rounded-lg hover:bg-gray-200 transition-colors\"\n        >\n          Skip for Now\n        </button>\n\n        <p className=\"text-xs text-gray-500 text-center\">\n          You can enable this later in Security Settings\n        </p>\n      </div>\n    </div>\n  );\n};\n\nexport default BiometricSetup;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}