{"ast":null,"code":"/**\r\n * Export utilities for transactions\r\n * Supports CSV, JSON, TXT, XML, and HTML report formats\r\n *//**\r\n * Export transactions to CSV format\r\n * @param {Array} transactions - Array of transaction objects\r\n * @param {string} fileName - Name of the file (without extension)\r\n */export const exportToCSV=function(transactions){let fileName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'transactions';if(!transactions||transactions.length===0){alert('No transactions to export');return;}// Define CSV headers\nconst headers=['Date & Time','Transaction ID','Recipient','Amount','Risk Score','Status','Remarks'];// Map transactions to CSV rows\nconst rows=transactions.map(tx=>{const createdAt=new Date(tx.created_at);return[createdAt.toLocaleString('en-IN'),tx.tx_id,tx.recipient_vpa,\"\\u20B9\".concat(tx.amount.toLocaleString('en-IN')),(parseFloat(tx.risk_score)*100).toFixed(2)+'%',getStatusLabel(tx.action),tx.remarks||'-'];});// Combine headers and rows\nconst csvContent=[headers.join(','),...rows.map(row=>row.map(cell=>\"\\\"\".concat(cell,\"\\\"\")).join(','))].join('\\n');// Create and download file\nconst element=document.createElement('a');const file=new Blob([csvContent],{type:'text/csv'});element.href=URL.createObjectURL(file);element.download=\"\".concat(fileName,\"_\").concat(new Date().toISOString().split('T')[0],\".csv\");document.body.appendChild(element);element.click();document.body.removeChild(element);};/**\r\n * Export transactions to JSON format\r\n * @param {Array} transactions - Array of transaction objects\r\n * @param {string} fileName - Name of the file (without extension)\r\n */export const exportToJSON=function(transactions){let fileName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'transactions';if(!transactions||transactions.length===0){alert('No transactions to export');return;}// Prepare data with formatted fields\nconst exportData={exportedAt:new Date().toISOString(),totalTransactions:transactions.length,transactions:transactions.map(tx=>{const createdAt=new Date(tx.created_at);return{dateTime:createdAt.toLocaleString('en-IN'),transactionId:tx.tx_id,recipient:tx.recipient_vpa,amount:tx.amount,riskScore:(parseFloat(tx.risk_score)*100).toFixed(2)+'%',status:getStatusLabel(tx.action),remarks:tx.remarks||null};})};// Create and download file\nconst element=document.createElement('a');const file=new Blob([JSON.stringify(exportData,null,2)],{type:'application/json'});element.href=URL.createObjectURL(file);element.download=\"\".concat(fileName,\"_\").concat(new Date().toISOString().split('T')[0],\".json\");document.body.appendChild(element);element.click();document.body.removeChild(element);};/**\r\n * Generate a detailed transaction report\r\n * @param {Array} transactions - Array of transaction objects\r\n * @param {string} fileName - Name of the file (without extension)\r\n */export const exportToDetailedReport=function(transactions){let fileName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'transaction_report';if(!transactions||transactions.length===0){alert('No transactions to export');return;}// Calculate statistics\nconst stats=calculateTransactionStats(transactions);// Generate HTML report\nconst htmlContent=generateHTMLReport(transactions,stats);// Create and download file\nconst element=document.createElement('a');const file=new Blob([htmlContent],{type:'text/html'});element.href=URL.createObjectURL(file);element.download=\"\".concat(fileName,\"_\").concat(new Date().toISOString().split('T')[0],\".html\");document.body.appendChild(element);element.click();document.body.removeChild(element);};/**\r\n * Export transactions to TXT format\r\n * @param {Array} transactions - Array of transaction objects\r\n * @param {string} fileName - Name of the file (without extension)\r\n */export const exportToTXT=function(transactions){let fileName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'transactions';if(!transactions||transactions.length===0){alert('No transactions to export');return;}const lines=transactions.map((tx,index)=>{const createdAt=new Date(tx.created_at);const riskScore=(parseFloat(tx.risk_score)*100).toFixed(2)+'%';return[\"#\".concat(index+1),\"Date & Time: \".concat(createdAt.toLocaleString('en-IN')),\"Transaction ID: \".concat(tx.tx_id),\"Recipient: \".concat(tx.recipient_vpa),\"Amount: \\u20B9\".concat(tx.amount.toLocaleString('en-IN')),\"Risk Score: \".concat(riskScore),\"Status: \".concat(getStatusLabel(tx.action)),\"Remarks: \".concat(tx.remarks||'-',\" \")].join('\\n');});const content=['FDT Secure Transactions Export',\"Generated: \".concat(new Date().toLocaleString('en-IN')),\"Total: \".concat(transactions.length),'',...lines].join('\\n\\n');const element=document.createElement('a');const file=new Blob([content],{type:'text/plain'});element.href=URL.createObjectURL(file);element.download=\"\".concat(fileName,\"_\").concat(new Date().toISOString().split('T')[0],\".txt\");document.body.appendChild(element);element.click();document.body.removeChild(element);};/**\r\n * Export transactions to XML format\r\n * @param {Array} transactions - Array of transaction objects\r\n * @param {string} fileName - Name of the file (without extension)\r\n */export const exportToXML=function(transactions){let fileName=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'transactions';if(!transactions||transactions.length===0){alert('No transactions to export');return;}const escapeXml=value=>{if(value===null||value===undefined)return'';return String(value).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\"/g,'&quot;').replace(/'/g,'&apos;');};const transactionNodes=transactions.map(tx=>{const createdAt=new Date(tx.created_at);const riskScore=(parseFloat(tx.risk_score)*100).toFixed(2)+'%';return\"  <transaction>\\n        <dateTime>\".concat(escapeXml(createdAt.toLocaleString('en-IN')),\"</dateTime>\\n        <transactionId>\").concat(escapeXml(tx.tx_id),\"</transactionId>\\n        <recipient>\").concat(escapeXml(tx.recipient_vpa),\"</recipient>\\n        <amount>\").concat(escapeXml(tx.amount),\"</amount>\\n        <riskScore>\").concat(escapeXml(riskScore),\"</riskScore>\\n        <status>\").concat(escapeXml(getStatusLabel(tx.action)),\"</status>\\n        <remarks>\").concat(escapeXml(tx.remarks||''),\"</remarks>\\n    </transaction>\");}).join('\\n');const xmlContent=\"<?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?>\\n<transactions>\\n    <exportedAt>\".concat(new Date().toISOString(),\"</exportedAt>\\n    <totalTransactions>\").concat(transactions.length,\"</totalTransactions>\\n\").concat(transactionNodes,\"\\n</transactions>\");const element=document.createElement('a');const file=new Blob([xmlContent],{type:'application/xml'});element.href=URL.createObjectURL(file);element.download=\"\".concat(fileName,\"_\").concat(new Date().toISOString().split('T')[0],\".xml\");document.body.appendChild(element);element.click();document.body.removeChild(element);};/**\r\n * Helper function to get status label from action\r\n */const getStatusLabel=action=>{const labels={'ALLOW':'Approved','DELAY':'Pending Review','BLOCK':'Blocked'};return labels[action]||action;};/**\r\n * Calculate statistics from transactions\r\n */const calculateTransactionStats=transactions=>{const stats={total:transactions.length,totalAmount:0,approved:0,pending:0,blocked:0,avgRiskScore:0,highRiskCount:0,mediumRiskCount:0,lowRiskCount:0};let riskScoreSum=0;transactions.forEach(tx=>{stats.totalAmount+=tx.amount;if(tx.action==='ALLOW')stats.approved++;else if(tx.action==='DELAY')stats.pending++;else if(tx.action==='BLOCK')stats.blocked++;const riskScore=parseFloat(tx.risk_score)*100;riskScoreSum+=riskScore;if(riskScore>=60)stats.highRiskCount++;else if(riskScore>=30)stats.mediumRiskCount++;else stats.lowRiskCount++;});stats.avgRiskScore=(riskScoreSum/transactions.length).toFixed(2);return stats;};/**\r\n * Generate HTML report content\r\n */const generateHTMLReport=(transactions,stats)=>{const reportDate=new Date().toLocaleString('en-IN');const transactionRows=transactions.map(tx=>{const createdAt=new Date(tx.created_at);return\"\\n        <tr>\\n            <td style=\\\"padding: 10px; border: 1px solid #ddd;\\\">\".concat(createdAt.toLocaleString('en-IN'),\"</td>\\n            <td style=\\\"padding: 10px; border: 1px solid #ddd; font-family: monospace; font-size: 12px;\\\">\").concat(tx.tx_id,\"</td>\\n            <td style=\\\"padding: 10px; border: 1px solid #ddd;\\\">\").concat(tx.recipient_vpa,\"</td>\\n            <td style=\\\"padding: 10px; border: 1px solid #ddd; text-align: right;\\\">\\u20B9\").concat(tx.amount.toLocaleString('en-IN'),\"</td>\\n            <td style=\\\"padding: 10px; border: 1px solid #ddd; text-align: center;\\\">\").concat((parseFloat(tx.risk_score)*100).toFixed(2),\"%</td>\\n            <td style=\\\"padding: 10px; border: 1px solid #ddd;\\\">\").concat(getStatusLabel(tx.action),\"</td>\\n            <td style=\\\"padding: 10px; border: 1px solid #ddd;\\\">\").concat(tx.remarks||'-',\"</td>\\n        </tr>\\n    \");}).join('');return\"\\n<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n    <meta charset=\\\"UTF-8\\\">\\n    <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n    <title>FDT Secure - Transaction Report</title>\\n    <style>\\n        body {\\n            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;\\n            margin: 0;\\n            padding: 20px;\\n            background-color: #f5f5f5;\\n        }\\n        .container {\\n            max-width: 1200px;\\n            margin: 0 auto;\\n            background-color: white;\\n            padding: 30px;\\n            border-radius: 8px;\\n            box-shadow: 0 2px 8px rgba(0,0,0,0.1);\\n        }\\n        .header {\\n            border-bottom: 3px solid #8b5cf6;\\n            margin-bottom: 30px;\\n            padding-bottom: 20px;\\n        }\\n        .header h1 {\\n            margin: 0 0 10px 0;\\n            color: #1f2937;\\n            font-size: 28px;\\n        }\\n        .header p {\\n            margin: 0;\\n            color: #6b7280;\\n            font-size: 14px;\\n        }\\n        .stats-grid {\\n            display: grid;\\n            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));\\n            gap: 20px;\\n            margin-bottom: 30px;\\n        }\\n        .stat-card {\\n            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\\n            color: white;\\n            padding: 20px;\\n            border-radius: 8px;\\n            text-align: center;\\n        }\\n        .stat-card.approved {\\n            background: linear-gradient(135deg, #10b981 0%, #059669 100%);\\n        }\\n        .stat-card.pending {\\n            background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);\\n        }\\n        .stat-card.blocked {\\n            background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\\n        }\\n        .stat-card h3 {\\n            margin: 0 0 10px 0;\\n            font-size: 14px;\\n            font-weight: 500;\\n            opacity: 0.9;\\n        }\\n        .stat-card .value {\\n            font-size: 32px;\\n            font-weight: bold;\\n        }\\n        .section-title {\\n            font-size: 18px;\\n            font-weight: 600;\\n            color: #1f2937;\\n            margin: 30px 0 15px 0;\\n            border-bottom: 2px solid #e5e7eb;\\n            padding-bottom: 10px;\\n        }\\n        table {\\n            width: 100%;\\n            border-collapse: collapse;\\n            margin-bottom: 30px;\\n        }\\n        th {\\n            background-color: #f3f4f6;\\n            padding: 12px 10px;\\n            text-align: left;\\n            font-weight: 600;\\n            color: #1f2937;\\n            border: 1px solid #ddd;\\n            font-size: 13px;\\n        }\\n        td {\\n            padding: 10px;\\n            border: 1px solid #ddd;\\n        }\\n        tr:nth-child(even) {\\n            background-color: #f9fafb;\\n        }\\n        .footer {\\n            margin-top: 30px;\\n            padding-top: 20px;\\n            border-top: 1px solid #e5e7eb;\\n            color: #6b7280;\\n            font-size: 12px;\\n            text-align: center;\\n        }\\n        .badge {\\n            display: inline-block;\\n            padding: 4px 8px;\\n            border-radius: 4px;\\n            font-size: 12px;\\n            font-weight: 500;\\n        }\\n        .badge-success {\\n            background-color: #dcfce7;\\n            color: #166534;\\n        }\\n        .badge-warning {\\n            background-color: #fef3c7;\\n            color: #92400e;\\n        }\\n        .badge-danger {\\n            background-color: #fee2e2;\\n            color: #991b1b;\\n        }\\n        .badge-low {\\n            background-color: #d1fae5;\\n            color: #065f46;\\n        }\\n        .badge-medium {\\n            background-color: #fed7aa;\\n            color: #9a3412;\\n        }\\n        .badge-high {\\n            background-color: #fecaca;\\n            color: #7c2d12;\\n        }\\n    </style>\\n</head>\\n<body>\\n    <div class=\\\"container\\\">\\n        <div class=\\\"header\\\">\\n            <h1>\\uD83D\\uDD10 FDT Secure Transaction Report</h1>\\n            <p>Generated on \".concat(reportDate,\"</p>\\n        </div>\\n\\n        <div class=\\\"section-title\\\">Transaction Summary</div>\\n        <div class=\\\"stats-grid\\\">\\n            <div class=\\\"stat-card\\\">\\n                <h3>Total Transactions</h3>\\n                <div class=\\\"value\\\">\").concat(stats.total,\"</div>\\n            </div>\\n            <div class=\\\"stat-card\\\">\\n                <h3>Total Amount</h3>\\n                <div class=\\\"value\\\">\\u20B9\").concat((stats.totalAmount/100000).toFixed(1),\"L</div>\\n            </div>\\n            <div class=\\\"stat-card approved\\\">\\n                <h3>Approved</h3>\\n                <div class=\\\"value\\\">\").concat(stats.approved,\"</div>\\n            </div>\\n            <div class=\\\"stat-card pending\\\">\\n                <h3>Pending Review</h3>\\n                <div class=\\\"value\\\">\").concat(stats.pending,\"</div>\\n            </div>\\n            <div class=\\\"stat-card blocked\\\">\\n                <h3>Blocked</h3>\\n                <div class=\\\"value\\\">\").concat(stats.blocked,\"</div>\\n            </div>\\n            <div class=\\\"stat-card\\\">\\n                <h3>Avg Risk Score</h3>\\n                <div class=\\\"value\\\">\").concat(stats.avgRiskScore,\"%</div>\\n            </div>\\n        </div>\\n\\n        <div style=\\\"display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 30px;\\\">\\n            <div style=\\\"background: #d1fae5; padding: 15px; border-radius: 8px; text-align: center;\\\">\\n                <div style=\\\"font-weight: 600; color: #065f46; font-size: 18px;\\\">\").concat(stats.lowRiskCount,\"</div>\\n                <div style=\\\"color: #047857; font-size: 14px;\\\">Low Risk</div>\\n            </div>\\n            <div style=\\\"background: #fed7aa; padding: 15px; border-radius: 8px; text-align: center;\\\">\\n                <div style=\\\"font-weight: 600; color: #9a3412; font-size: 18px;\\\">\").concat(stats.mediumRiskCount,\"</div>\\n                <div style=\\\"color: #b45309; font-size: 14px;\\\">Medium Risk</div>\\n            </div>\\n            <div style=\\\"background: #fecaca; padding: 15px; border-radius: 8px; text-align: center;\\\">\\n                <div style=\\\"font-weight: 600; color: #7c2d12; font-size: 18px;\\\">\").concat(stats.highRiskCount,\"</div>\\n                <div style=\\\"color: #b91c1c; font-size: 14px;\\\">High Risk</div>\\n            </div>\\n        </div>\\n\\n        <div class=\\\"section-title\\\">Transaction Details</div>\\n        <table>\\n            <thead>\\n                <tr>\\n                    <th>Date &amp; Time</th>\\n                    <th>Transaction ID</th>\\n                    <th>Recipient</th>\\n                    <th>Amount</th>\\n                    <th>Risk Score</th>\\n                    <th>Status</th>\\n                    <th>Remarks</th>\\n                </tr>\\n            </thead>\\n            <tbody>\\n                \").concat(transactionRows,\"\\n            </tbody>\\n        </table>\\n\\n        <div class=\\\"footer\\\">\\n            <p>This report was automatically generated by FDT Secure. For more information, visit your dashboard.</p>\\n        </div>\\n    </div>\\n</body>\\n</html>\\n  \");};","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}