{"ast":null,"code":"import _objectSpread from\"C:/Users/jerol/OneDrive/Desktop/FDT_HOST/fdt-in-upi/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useMemo}from'react';import{Link,useNavigate}from'react-router-dom';import{loginUser}from'../api';import cacheManager from'../utils/cacheManager';import errorHandler from'../utils/errorHandler';import FloatingLines from'./FloatingLines';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const LoginScreen=_ref=>{let{onLogin}=_ref;const navigate=useNavigate();const[formData,setFormData]=useState({phone:'',password:''});const[error,setError]=useState('');const[loading,setLoading]=useState(false);const[showPassword,setShowPassword]=useState(false);const floatingLinesProps=useMemo(()=>({linesGradient:['#e947f5','#5b6cff','#7c3aed'],enabledWaves:['top','middle','bottom'],lineCount:[6,7,6],lineDistance:[6,5,4],topWavePosition:{x:10.0,y:0.5,rotate:-0.4},middleWavePosition:{x:5.0,y:0.0,rotate:0.2},bottomWavePosition:{x:2.0,y:-0.7,rotate:0.4},animationSpeed:1,interactive:true,bendRadius:5.0,bendStrength:-0.5,mouseDamping:0.05,parallax:true,parallaxStrength:0.2,mixBlendMode:\"screen\"}),[]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));setError('');};const handleSubmit=async e=>{e.preventDefault();setError('');const validation=errorHandler.validateForm(formData,{phone:{required:true,label:'Phone Number',custom:value=>{const cleanPhone=value.replace(/\\D/g,'');return cleanPhone.length===10||cleanPhone.length===12;},message:'Please enter a valid 10-digit phone number (with or without +91)'},password:{required:true,label:'Password',minLength:3}});if(!validation.isValid){setError(Object.values(validation.errors)[0]);return;}setLoading(true);try{console.log('ðŸ” Attempting login with:',{phone:formData.phone});const response=await loginUser(formData);console.log('ðŸŽ‰ Login response:',response);if(response.status==='success'){cacheManager.setCurrentUser(response.user.user_id);onLogin(response.user,response.token);navigate('/dashboard');}}catch(err){console.error('âŒ Login failed:',err);const errorInfo=errorHandler.handleAPIError(err,'User Login');setError(errorInfo.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen bg-slate-950 flex items-center justify-center p-4 relative overflow-hidden\",children:[/*#__PURE__*/_jsx(FloatingLines,_objectSpread({},floatingLinesProps)),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white/10 backdrop-blur-xl rounded-3xl shadow-2xl w-full max-w-md p-8 border border-white/20 relative z-10\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center mb-8\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-20 h-20 mx-auto bg-gradient-to-br from-purple-500 to-indigo-600 rounded-full flex items-center justify-center mb-4 shadow-lg\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-12 h-12 text-white\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z\"})})}),/*#__PURE__*/_jsx(\"h2\",{className:\"text-3xl font-bold text-white mb-2\",children:\"FDT Secure\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-purple-200\",children:\"Fraud Detection & Payments\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"bg-red-500/20 border border-red-500/30 text-red-200 px-4 py-3 rounded-lg mb-4 backdrop-blur-sm\",children:error}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-purple-200 mb-2\",children:\"Phone Number\"}),/*#__PURE__*/_jsx(\"input\",{type:\"tel\",name:\"phone\",value:formData.phone,onChange:handleChange,placeholder:\"+91XXXXXXXXXX\",className:\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-purple-300 backdrop-blur-sm\",required:true,\"data-testid\":\"login-phone-input\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{className:\"block text-sm font-medium text-purple-200 mb-2\",children:\"Password\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"relative\",children:[/*#__PURE__*/_jsx(\"input\",{type:showPassword?\"text\":\"password\",name:\"password\",value:formData.password,onChange:handleChange,placeholder:\"Enter your password\",className:\"w-full px-4 py-3 bg-white/10 border border-white/20 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-white placeholder-purple-300 backdrop-blur-sm\",required:true,\"data-testid\":\"login-password-input\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setShowPassword(!showPassword),className:\"absolute right-3 top-1/2 transform -translate-y-1/2 text-purple-300 hover:text-purple-100 transition\",title:showPassword?\"Hide password\":\"Show password\",children:showPassword?/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{d:\"M10 12a2 2 0 100-4 2 2 0 000 4z\"}),/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M.458 10C1.732 5.943 5.522 3 10 3s8.268 2.943 9.542 7c-1.274 4.057-5.064 7-9.542 7S1.732 14.057.458 10zM14 10a4 4 0 11-8 0 4 4 0 018 0z\",clipRule:\"evenodd\"})]}):/*#__PURE__*/_jsxs(\"svg\",{xmlns:\"http://www.w3.org/2000/svg\",className:\"h-5 w-5\",viewBox:\"0 0 20 20\",fill:\"currentColor\",children:[/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M3.707 2.293a1 1 0 00-1.414 1.414l14 14a1 1 0 001.414-1.414l-1.473-1.473A10.014 10.014 0 0019.542 10C18.268 5.943 14.478 3 10 3a9.958 9.958 0 00-4.512 1.074l-1.78-1.781zm4.261 4.26l1.514 1.515a2.003 2.003 0 012.45 2.45l1.514 1.514a4 4 0 00-5.478-5.478z\",clipRule:\"evenodd\"}),/*#__PURE__*/_jsx(\"path\",{d:\"M12.454 16.697L9.75 13.992a4 4 0 01-3.742-3.741L2.335 6.578A9.98 9.98 0 00.458 10c1.274 4.057 5.065 7 9.542 7 .847 0 1.669-.105 2.454-.303z\"})]})})]})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"w-full bg-gradient-to-r from-purple-600 to-indigo-600 text-white py-3 rounded-lg font-semibold hover:from-purple-700 hover:to-indigo-700 transition duration-200 disabled:opacity-50 shadow-lg transform hover:scale-105\",\"data-testid\":\"login-submit-button\",children:loading?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center justify-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin mr-2\"}),\"Signing in...\"]}):'Sign In'})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-6\",children:/*#__PURE__*/_jsxs(\"p\",{className:\"text-purple-200\",children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(Link,{to:\"/register\",className:\"text-purple-100 font-semibold hover:text-white\",children:\"Sign Up\"})]})})]})]});};export default LoginScreen;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}