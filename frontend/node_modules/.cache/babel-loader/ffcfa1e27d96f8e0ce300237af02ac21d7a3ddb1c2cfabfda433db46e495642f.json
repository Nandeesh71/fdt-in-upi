{"ast":null,"code":"/**\n * Robust Session Storage Manager\n * Works on mobile browsers with stricter storage policies\n * Falls back gracefully if localStorage is disabled or restricted\n */\n\nclass SessionStorageManager {\n  constructor() {\n    this.storageType = this.detectStorageType();\n    this.sessionData = {}; // In-memory fallback\n    console.log(`üì± Using storage type: ${this.storageType}`);\n  }\n\n  /**\n   * Detect which storage mechanism is available\n   */\n  detectStorageType() {\n    // Check if localStorage is available and writable\n    try {\n      const test = '__storage_test__';\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return 'localStorage';\n    } catch (e) {\n      console.warn('‚ö† localStorage unavailable, falling back to memory storage');\n      return 'memory';\n    }\n  }\n\n  /**\n   * Set a value in the best available storage\n   */\n  setItem(key, value) {\n    try {\n      const serialized = JSON.stringify(value);\n      if (this.storageType === 'localStorage') {\n        localStorage.setItem(key, serialized);\n      } else {\n        this.sessionData[key] = serialized;\n      }\n      console.log(`‚úì Stored ${key} in ${this.storageType}`);\n    } catch (error) {\n      console.error(`‚ùå Failed to store ${key}:`, error);\n      // Fallback to memory\n      this.sessionData[key] = JSON.stringify(value);\n    }\n  }\n\n  /**\n   * Get a value from the best available storage\n   */\n  getItem(key) {\n    try {\n      let value;\n      if (this.storageType === 'localStorage') {\n        value = localStorage.getItem(key);\n      } else {\n        value = this.sessionData[key];\n      }\n      return value ? JSON.parse(value) : null;\n    } catch (error) {\n      console.error(`‚ùå Failed to retrieve ${key}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Remove a value from storage\n   */\n  removeItem(key) {\n    try {\n      if (this.storageType === 'localStorage') {\n        localStorage.removeItem(key);\n      } else {\n        delete this.sessionData[key];\n      }\n      console.log(`‚úì Removed ${key} from ${this.storageType}`);\n    } catch (error) {\n      console.error(`‚ùå Failed to remove ${key}:`, error);\n    }\n  }\n\n  /**\n   * Clear all session data\n   */\n  clear() {\n    try {\n      if (this.storageType === 'localStorage') {\n        // Clear only FDT-related items\n        localStorage.removeItem('fdt_token');\n        localStorage.removeItem('fdt_user');\n      } else {\n        this.sessionData = {};\n      }\n      console.log(`‚úì Cleared session data from ${this.storageType}`);\n    } catch (error) {\n      console.error('‚ùå Failed to clear session data:', error);\n    }\n  }\n\n  /**\n   * Check if storage is available\n   */\n  isAvailable() {\n    return this.storageType !== 'memory';\n  }\n}\n\n// Create singleton instance\nconst sessionStorage = new SessionStorageManager();\nexport default sessionStorage;","map":{"version":3,"names":["SessionStorageManager","constructor","storageType","detectStorageType","sessionData","console","log","test","localStorage","setItem","removeItem","e","warn","key","value","serialized","JSON","stringify","error","getItem","parse","clear","isAvailable","sessionStorage"],"sources":["/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/src/utils/sessionStorageManager.js"],"sourcesContent":["/**\n * Robust Session Storage Manager\n * Works on mobile browsers with stricter storage policies\n * Falls back gracefully if localStorage is disabled or restricted\n */\n\nclass SessionStorageManager {\n  constructor() {\n    this.storageType = this.detectStorageType();\n    this.sessionData = {}; // In-memory fallback\n    console.log(`üì± Using storage type: ${this.storageType}`);\n  }\n\n  /**\n   * Detect which storage mechanism is available\n   */\n  detectStorageType() {\n    // Check if localStorage is available and writable\n    try {\n      const test = '__storage_test__';\n      localStorage.setItem(test, test);\n      localStorage.removeItem(test);\n      return 'localStorage';\n    } catch (e) {\n      console.warn('‚ö† localStorage unavailable, falling back to memory storage');\n      return 'memory';\n    }\n  }\n\n  /**\n   * Set a value in the best available storage\n   */\n  setItem(key, value) {\n    try {\n      const serialized = JSON.stringify(value);\n\n      if (this.storageType === 'localStorage') {\n        localStorage.setItem(key, serialized);\n      } else {\n        this.sessionData[key] = serialized;\n      }\n\n      console.log(`‚úì Stored ${key} in ${this.storageType}`);\n    } catch (error) {\n      console.error(`‚ùå Failed to store ${key}:`, error);\n      // Fallback to memory\n      this.sessionData[key] = JSON.stringify(value);\n    }\n  }\n\n  /**\n   * Get a value from the best available storage\n   */\n  getItem(key) {\n    try {\n      let value;\n\n      if (this.storageType === 'localStorage') {\n        value = localStorage.getItem(key);\n      } else {\n        value = this.sessionData[key];\n      }\n\n      return value ? JSON.parse(value) : null;\n    } catch (error) {\n      console.error(`‚ùå Failed to retrieve ${key}:`, error);\n      return null;\n    }\n  }\n\n  /**\n   * Remove a value from storage\n   */\n  removeItem(key) {\n    try {\n      if (this.storageType === 'localStorage') {\n        localStorage.removeItem(key);\n      } else {\n        delete this.sessionData[key];\n      }\n\n      console.log(`‚úì Removed ${key} from ${this.storageType}`);\n    } catch (error) {\n      console.error(`‚ùå Failed to remove ${key}:`, error);\n    }\n  }\n\n  /**\n   * Clear all session data\n   */\n  clear() {\n    try {\n      if (this.storageType === 'localStorage') {\n        // Clear only FDT-related items\n        localStorage.removeItem('fdt_token');\n        localStorage.removeItem('fdt_user');\n      } else {\n        this.sessionData = {};\n      }\n\n      console.log(`‚úì Cleared session data from ${this.storageType}`);\n    } catch (error) {\n      console.error('‚ùå Failed to clear session data:', error);\n    }\n  }\n\n  /**\n   * Check if storage is available\n   */\n  isAvailable() {\n    return this.storageType !== 'memory';\n  }\n}\n\n// Create singleton instance\nconst sessionStorage = new SessionStorageManager();\n\nexport default sessionStorage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}