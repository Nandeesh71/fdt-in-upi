{"ast":null,"code":"var _jsxFileName = \"/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/src/components/NotificationSystem.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, createContext, useContext, useCallback } from 'react';\nimport { getUserTransactions } from '../api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst NotificationContext = /*#__PURE__*/createContext();\nexport const useNotifications = () => {\n  _s();\n  const context = useContext(NotificationContext);\n  if (!context) {\n    throw new Error('useNotifications must be used within a NotificationProvider');\n  }\n  return context;\n};\n_s(useNotifications, \"b9L3QQ+jgeyIrH0NfHrJ8nn7VMU=\");\nexport const NotificationProvider = ({\n  children\n}) => {\n  _s2();\n  const [notifications, setNotifications] = useState([]);\n  const [showNotificationPanel, setShowNotificationPanel] = useState(false);\n  const addNotification = useCallback(notification => {\n    const id = Date.now() + Math.random();\n    const newNotification = {\n      id,\n      timestamp: new Date(),\n      read: false,\n      ...notification\n    };\n    setNotifications(prev => [newNotification, ...prev]);\n\n    // Auto-remove temporary notifications after 10 seconds\n    if (notification.type !== 'delayed_transaction') {\n      setTimeout(() => {\n        setNotifications(prev => prev.filter(n => n.id !== id));\n      }, 10000);\n    }\n  }, []);\n  const removeNotification = useCallback(id => {\n    setNotifications(prev => prev.filter(n => n.id !== id));\n  }, []);\n  const markAsRead = useCallback(id => {\n    setNotifications(prev => prev.map(n => n.id === id ? {\n      ...n,\n      read: true\n    } : n));\n  }, []);\n  const clearAll = useCallback(() => {\n    setNotifications([]);\n  }, []);\n\n  // Check for delayed transactions periodically (only if user is authenticated)\n  useEffect(() => {\n    // Only check if user is logged in (has token)\n    const token = localStorage.getItem('fdt_token');\n    if (!token) {\n      return; // Skip if not authenticated\n    }\n    const checkDelayedTransactions = async () => {\n      try {\n        const data = await getUserTransactions(20, 'DELAY');\n        const delayedTxns = data.transactions || [];\n        delayedTxns.forEach(tx => {\n          const existingNotification = notifications.find(n => n.type === 'delayed_transaction' && n.transactionId === tx.tx_id && n.read === false);\n          if (!existingNotification) {\n            addNotification({\n              type: 'delayed_transaction',\n              title: 'Transaction Pending Verification',\n              message: `Transaction of ₹${tx.amount} to ${tx.recipient_vpa} needs your confirmation`,\n              transactionId: tx.tx_id,\n              action: 'review',\n              actionText: 'Review Now',\n              actionUrl: `/fraud-alert/${tx.tx_id}`\n            });\n          }\n        });\n      } catch (err) {\n        console.error('Failed to check delayed transactions:', err);\n      }\n    };\n\n    // Check immediately and then every 30 seconds\n    checkDelayedTransactions();\n    const interval = setInterval(checkDelayedTransactions, 30000);\n    return () => clearInterval(interval);\n  }, [notifications, addNotification]);\n  const unreadCount = notifications.filter(n => !n.read).length;\n  return /*#__PURE__*/_jsxDEV(NotificationContext.Provider, {\n    value: {\n      notifications,\n      addNotification,\n      removeNotification,\n      markAsRead,\n      clearAll,\n      showNotificationPanel,\n      setShowNotificationPanel,\n      unreadCount\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};\n_s2(NotificationProvider, \"5OtQvproRVMyPxo4W6yTAovdkiU=\");\n_c = NotificationProvider;\nexport default NotificationContext;\nvar _c;\n$RefreshReg$(_c, \"NotificationProvider\");","map":{"version":3,"names":["React","useState","useEffect","createContext","useContext","useCallback","getUserTransactions","jsxDEV","_jsxDEV","NotificationContext","useNotifications","_s","context","Error","NotificationProvider","children","_s2","notifications","setNotifications","showNotificationPanel","setShowNotificationPanel","addNotification","notification","id","Date","now","Math","random","newNotification","timestamp","read","prev","type","setTimeout","filter","n","removeNotification","markAsRead","map","clearAll","token","localStorage","getItem","checkDelayedTransactions","data","delayedTxns","transactions","forEach","tx","existingNotification","find","transactionId","tx_id","title","message","amount","recipient_vpa","action","actionText","actionUrl","err","console","error","interval","setInterval","clearInterval","unreadCount","length","Provider","value","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/src/components/NotificationSystem.js"],"sourcesContent":["import React, { useState, useEffect, createContext, useContext, useCallback } from 'react';\nimport { getUserTransactions } from '../api';\n\nconst NotificationContext = createContext();\n\nexport const useNotifications = () => {\n  const context = useContext(NotificationContext);\n  if (!context) {\n    throw new Error('useNotifications must be used within a NotificationProvider');\n  }\n  return context;\n};\n\nexport const NotificationProvider = ({ children }) => {\n  const [notifications, setNotifications] = useState([]);\n  const [showNotificationPanel, setShowNotificationPanel] = useState(false);\n\n  const addNotification = useCallback((notification) => {\n    const id = Date.now() + Math.random();\n    const newNotification = {\n      id,\n      timestamp: new Date(),\n      read: false,\n      ...notification\n    };\n    \n    setNotifications(prev => [newNotification, ...prev]);\n    \n    // Auto-remove temporary notifications after 10 seconds\n    if (notification.type !== 'delayed_transaction') {\n      setTimeout(() => {\n        setNotifications(prev => prev.filter(n => n.id !== id));\n      }, 10000);\n    }\n  }, []);\n\n  const removeNotification = useCallback((id) => {\n    setNotifications(prev => prev.filter(n => n.id !== id));\n  }, []);\n\n  const markAsRead = useCallback((id) => {\n    setNotifications(prev => \n      prev.map(n => n.id === id ? { ...n, read: true } : n)\n    );\n  }, []);\n\n  const clearAll = useCallback(() => {\n    setNotifications([]);\n  }, []);\n\n  // Check for delayed transactions periodically (only if user is authenticated)\n  useEffect(() => {\n    // Only check if user is logged in (has token)\n    const token = localStorage.getItem('fdt_token');\n    if (!token) {\n      return; // Skip if not authenticated\n    }\n\n    const checkDelayedTransactions = async () => {\n      try {\n        const data = await getUserTransactions(20, 'DELAY');\n        const delayedTxns = data.transactions || [];\n        \n        delayedTxns.forEach(tx => {\n          const existingNotification = notifications.find(\n            n => n.type === 'delayed_transaction' && n.transactionId === tx.tx_id && n.read === false\n          );\n          \n          if (!existingNotification) {\n            addNotification({\n              type: 'delayed_transaction',\n              title: 'Transaction Pending Verification',\n              message: `Transaction of ₹${tx.amount} to ${tx.recipient_vpa} needs your confirmation`,\n              transactionId: tx.tx_id,\n              action: 'review',\n              actionText: 'Review Now',\n              actionUrl: `/fraud-alert/${tx.tx_id}`\n            });\n          }\n        });\n      } catch (err) {\n        console.error('Failed to check delayed transactions:', err);\n      }\n    };\n\n    // Check immediately and then every 30 seconds\n    checkDelayedTransactions();\n    const interval = setInterval(checkDelayedTransactions, 30000);\n\n    return () => clearInterval(interval);\n  }, [notifications, addNotification]);\n\n  const unreadCount = notifications.filter(n => !n.read).length;\n\n  return (\n    <NotificationContext.Provider\n      value={{\n        notifications,\n        addNotification,\n        removeNotification,\n        markAsRead,\n        clearAll,\n        showNotificationPanel,\n        setShowNotificationPanel,\n        unreadCount\n      }}\n    >\n      {children}\n    </NotificationContext.Provider>\n  );\n};\n\nexport default NotificationContext;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}