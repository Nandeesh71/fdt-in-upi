{"ast":null,"code":"class CacheManager {\n  constructor() {\n    this.cache = new Map();\n    this.currentUserId = null;\n    this.cacheConfig = {\n      transactions: {\n        ttl: 10 * 60 * 1000,\n        // 10 minutes - increased for better performance\n        maxSize: 100\n      },\n      dashboard: {\n        ttl: 5 * 60 * 1000,\n        // 5 minutes - increased to reduce API calls\n        maxSize: 50\n      },\n      userProfile: {\n        ttl: 30 * 60 * 1000,\n        // 30 minutes\n        maxSize: 10\n      },\n      notifications: {\n        ttl: 10 * 60 * 1000,\n        // 10 minutes\n        maxSize: 200\n      }\n    };\n  }\n  setCurrentUser(userId) {\n    // If user changed, clear all user-specific cache\n    if (this.currentUserId && this.currentUserId !== userId) {\n      this.clearUserCache();\n    }\n    this.currentUserId = userId;\n  }\n  clearUserCache() {\n    const keysToDelete = [];\n    for (const [key, item] of this.cache.entries()) {\n      // Clear dashboard and transaction cache which are user-specific\n      if (['dashboard', 'transactions', 'userProfile'].includes(item.category)) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n  set(key, data, category = 'default') {\n    const config = this.cacheConfig[category] || {\n      ttl: 5 * 60 * 1000,\n      maxSize: 50\n    };\n\n    // Check if we need to evict old entries\n    if (this.cache.size >= config.maxSize) {\n      this.evictOldest(category);\n    }\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      category,\n      ttl: config.ttl\n    });\n  }\n  get(key) {\n    const item = this.cache.get(key);\n    if (!item) return null;\n\n    // Check if expired\n    if (Date.now() - item.timestamp > item.ttl) {\n      this.cache.delete(key);\n      return null;\n    }\n    return item.data;\n  }\n  invalidate(pattern) {\n    const keysToDelete = [];\n    for (const key of this.cache.keys()) {\n      if (key.includes(pattern)) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n  invalidateCategory(category) {\n    const keysToDelete = [];\n    for (const [key, item] of this.cache.entries()) {\n      if (item.category === category) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n  evictOldest(category) {\n    let oldestKey = null;\n    let oldestTimestamp = Date.now();\n    for (const [cacheKey, item] of this.cache.entries()) {\n      if (item.category === category && item.timestamp < oldestTimestamp) {\n        oldestTimestamp = item.timestamp;\n        oldestKey = cacheKey;\n      }\n    }\n    if (oldestKey) {\n      this.cache.delete(oldestKey);\n    }\n  }\n  clear() {\n    this.cache.clear();\n    this.currentUserId = null;\n  }\n  getStats() {\n    const stats = {\n      total: this.cache.size,\n      byCategory: {}\n    };\n    for (const [, item] of this.cache.entries()) {\n      if (!stats.byCategory[item.category]) {\n        stats.byCategory[item.category] = 0;\n      }\n      stats.byCategory[item.category]++;\n    }\n    return stats;\n  }\n}\nconst cacheManager = new CacheManager();\nexport default cacheManager;","map":{"version":3,"names":["CacheManager","constructor","cache","Map","currentUserId","cacheConfig","transactions","ttl","maxSize","dashboard","userProfile","notifications","setCurrentUser","userId","clearUserCache","keysToDelete","key","item","entries","includes","category","push","forEach","delete","set","data","config","size","evictOldest","timestamp","Date","now","get","invalidate","pattern","keys","invalidateCategory","oldestKey","oldestTimestamp","cacheKey","clear","getStats","stats","total","byCategory","cacheManager"],"sources":["/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/src/utils/cacheManager.js"],"sourcesContent":["class CacheManager {\n  constructor() {\n    this.cache = new Map();\n    this.currentUserId = null;\n    this.cacheConfig = {\n      transactions: {\n        ttl: 10 * 60 * 1000, // 10 minutes - increased for better performance\n        maxSize: 100\n      },\n      dashboard: {\n        ttl: 5 * 60 * 1000, // 5 minutes - increased to reduce API calls\n        maxSize: 50\n      },\n      userProfile: {\n        ttl: 30 * 60 * 1000, // 30 minutes\n        maxSize: 10\n      },\n      notifications: {\n        ttl: 10 * 60 * 1000, // 10 minutes\n        maxSize: 200\n      }\n    };\n  }\n\n  setCurrentUser(userId) {\n    // If user changed, clear all user-specific cache\n    if (this.currentUserId && this.currentUserId !== userId) {\n      this.clearUserCache();\n    }\n    this.currentUserId = userId;\n  }\n\n  clearUserCache() {\n    const keysToDelete = [];\n    for (const [key, item] of this.cache.entries()) {\n      // Clear dashboard and transaction cache which are user-specific\n      if (['dashboard', 'transactions', 'userProfile'].includes(item.category)) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n\n  set(key, data, category = 'default') {\n    const config = this.cacheConfig[category] || { ttl: 5 * 60 * 1000, maxSize: 50 };\n    \n    // Check if we need to evict old entries\n    if (this.cache.size >= config.maxSize) {\n      this.evictOldest(category);\n    }\n\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      category,\n      ttl: config.ttl\n    });\n  }\n\n  get(key) {\n    const item = this.cache.get(key);\n    if (!item) return null;\n\n    // Check if expired\n    if (Date.now() - item.timestamp > item.ttl) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return item.data;\n  }\n\n  invalidate(pattern) {\n    const keysToDelete = [];\n    for (const key of this.cache.keys()) {\n      if (key.includes(pattern)) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n\n  invalidateCategory(category) {\n    const keysToDelete = [];\n    for (const [key, item] of this.cache.entries()) {\n      if (item.category === category) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n\n  evictOldest(category) {\n    let oldestKey = null;\n    let oldestTimestamp = Date.now();\n\n    for (const [cacheKey, item] of this.cache.entries()) {\n      if (item.category === category && item.timestamp < oldestTimestamp) {\n        oldestTimestamp = item.timestamp;\n        oldestKey = cacheKey;\n      }\n    }\n\n    if (oldestKey) {\n      this.cache.delete(oldestKey);\n    }\n  }\n\n  clear() {\n    this.cache.clear();\n    this.currentUserId = null;\n  }\n\n  getStats() {\n    const stats = {\n      total: this.cache.size,\n      byCategory: {}\n    };\n\n    for (const [, item] of this.cache.entries()) {\n      if (!stats.byCategory[item.category]) {\n        stats.byCategory[item.category] = 0;\n      }\n      stats.byCategory[item.category]++;\n    }\n\n    return stats;\n  }\n}\n\nconst cacheManager = new CacheManager();\n\nexport default cacheManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}