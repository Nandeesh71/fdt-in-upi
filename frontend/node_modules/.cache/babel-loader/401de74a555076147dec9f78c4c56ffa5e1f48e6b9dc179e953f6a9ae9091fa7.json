{"ast":null,"code":"class CacheManager{constructor(){this.cache=new Map();this.currentUserId=null;this.cacheConfig={transactions:{ttl:10*60*1000,// 10 minutes - increased for better performance\nmaxSize:100},dashboard:{ttl:5*60*1000,// 5 minutes - increased to reduce API calls\nmaxSize:50},userProfile:{ttl:30*60*1000,// 30 minutes\nmaxSize:10},notifications:{ttl:10*60*1000,// 10 minutes\nmaxSize:200}};}setCurrentUser(userId){// If user changed, clear all user-specific cache\nif(this.currentUserId&&this.currentUserId!==userId){this.clearUserCache();}this.currentUserId=userId;}clearUserCache(){const keysToDelete=[];for(const[key,item]of this.cache.entries()){// Clear dashboard and transaction cache which are user-specific\nif(['dashboard','transactions','userProfile'].includes(item.category)){keysToDelete.push(key);}}keysToDelete.forEach(key=>this.cache.delete(key));}set(key,data){let category=arguments.length>2&&arguments[2]!==undefined?arguments[2]:'default';const config=this.cacheConfig[category]||{ttl:5*60*1000,maxSize:50};// Check if we need to evict old entries\nif(this.cache.size>=config.maxSize){this.evictOldest(category);}this.cache.set(key,{data,timestamp:Date.now(),category,ttl:config.ttl});}get(key){const item=this.cache.get(key);if(!item)return null;// Check if expired\nif(Date.now()-item.timestamp>item.ttl){this.cache.delete(key);return null;}return item.data;}invalidate(pattern){const keysToDelete=[];for(const key of this.cache.keys()){if(key.includes(pattern)){keysToDelete.push(key);}}keysToDelete.forEach(key=>this.cache.delete(key));}invalidateCategory(category){const keysToDelete=[];for(const[key,item]of this.cache.entries()){if(item.category===category){keysToDelete.push(key);}}keysToDelete.forEach(key=>this.cache.delete(key));}evictOldest(category){let oldestKey=null;let oldestTimestamp=Date.now();for(const[cacheKey,item]of this.cache.entries()){if(item.category===category&&item.timestamp<oldestTimestamp){oldestTimestamp=item.timestamp;oldestKey=cacheKey;}}if(oldestKey){this.cache.delete(oldestKey);}}clear(){this.cache.clear();this.currentUserId=null;}getStats(){const stats={total:this.cache.size,byCategory:{}};for(const[,item]of this.cache.entries()){if(!stats.byCategory[item.category]){stats.byCategory[item.category]=0;}stats.byCategory[item.category]++;}return stats;}}const cacheManager=new CacheManager();export default cacheManager;","map":{"version":3,"names":["CacheManager","constructor","cache","Map","currentUserId","cacheConfig","transactions","ttl","maxSize","dashboard","userProfile","notifications","setCurrentUser","userId","clearUserCache","keysToDelete","key","item","entries","includes","category","push","forEach","delete","set","data","arguments","length","undefined","config","size","evictOldest","timestamp","Date","now","get","invalidate","pattern","keys","invalidateCategory","oldestKey","oldestTimestamp","cacheKey","clear","getStats","stats","total","byCategory","cacheManager"],"sources":["/home/aakash/Projects/Fraud-Detection-in-UPI---FDT2/frontend/src/utils/cacheManager.js"],"sourcesContent":["class CacheManager {\n  constructor() {\n    this.cache = new Map();\n    this.currentUserId = null;\n    this.cacheConfig = {\n      transactions: {\n        ttl: 10 * 60 * 1000, // 10 minutes - increased for better performance\n        maxSize: 100\n      },\n      dashboard: {\n        ttl: 5 * 60 * 1000, // 5 minutes - increased to reduce API calls\n        maxSize: 50\n      },\n      userProfile: {\n        ttl: 30 * 60 * 1000, // 30 minutes\n        maxSize: 10\n      },\n      notifications: {\n        ttl: 10 * 60 * 1000, // 10 minutes\n        maxSize: 200\n      }\n    };\n  }\n\n  setCurrentUser(userId) {\n    // If user changed, clear all user-specific cache\n    if (this.currentUserId && this.currentUserId !== userId) {\n      this.clearUserCache();\n    }\n    this.currentUserId = userId;\n  }\n\n  clearUserCache() {\n    const keysToDelete = [];\n    for (const [key, item] of this.cache.entries()) {\n      // Clear dashboard and transaction cache which are user-specific\n      if (['dashboard', 'transactions', 'userProfile'].includes(item.category)) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n\n  set(key, data, category = 'default') {\n    const config = this.cacheConfig[category] || { ttl: 5 * 60 * 1000, maxSize: 50 };\n    \n    // Check if we need to evict old entries\n    if (this.cache.size >= config.maxSize) {\n      this.evictOldest(category);\n    }\n\n    this.cache.set(key, {\n      data,\n      timestamp: Date.now(),\n      category,\n      ttl: config.ttl\n    });\n  }\n\n  get(key) {\n    const item = this.cache.get(key);\n    if (!item) return null;\n\n    // Check if expired\n    if (Date.now() - item.timestamp > item.ttl) {\n      this.cache.delete(key);\n      return null;\n    }\n\n    return item.data;\n  }\n\n  invalidate(pattern) {\n    const keysToDelete = [];\n    for (const key of this.cache.keys()) {\n      if (key.includes(pattern)) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n\n  invalidateCategory(category) {\n    const keysToDelete = [];\n    for (const [key, item] of this.cache.entries()) {\n      if (item.category === category) {\n        keysToDelete.push(key);\n      }\n    }\n    keysToDelete.forEach(key => this.cache.delete(key));\n  }\n\n  evictOldest(category) {\n    let oldestKey = null;\n    let oldestTimestamp = Date.now();\n\n    for (const [cacheKey, item] of this.cache.entries()) {\n      if (item.category === category && item.timestamp < oldestTimestamp) {\n        oldestTimestamp = item.timestamp;\n        oldestKey = cacheKey;\n      }\n    }\n\n    if (oldestKey) {\n      this.cache.delete(oldestKey);\n    }\n  }\n\n  clear() {\n    this.cache.clear();\n    this.currentUserId = null;\n  }\n\n  getStats() {\n    const stats = {\n      total: this.cache.size,\n      byCategory: {}\n    };\n\n    for (const [, item] of this.cache.entries()) {\n      if (!stats.byCategory[item.category]) {\n        stats.byCategory[item.category] = 0;\n      }\n      stats.byCategory[item.category]++;\n    }\n\n    return stats;\n  }\n}\n\nconst cacheManager = new CacheManager();\n\nexport default cacheManager;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}